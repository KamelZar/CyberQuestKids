<!DOCTYPE html>
<!-- 
    üîì EASTER EGG POUR D√âVELOPPEURS üîì
    F√©licitations ! Vous savez inspecter le code source !
    
    Fun Facts pour les curieux :
    ‚Ä¢ Le premier virus informatique s'appelait "Creeper" (1971)
    ‚Ä¢ "Hacker" √©tait √† l'origine un terme positif au MIT
    ‚Ä¢ Le terme "bug" vient d'un vrai insecte trouv√© dans un ordinateur en 1947
    ‚Ä¢ Le premier spam email a √©t√© envoy√© en 1978 √† 400 utilisateurs
    
    üéØ D√©fi ultime : Essayez le Konami Code (‚Üë‚Üë‚Üì‚Üì‚Üê‚Üí‚Üê‚ÜíBA)
    üîç Indice : Certains mots de passe cachent des surprises...
    üõ°Ô∏è Secret : Cliquez sur le logo Devoxx4Kids
    
    PS: Si vous lisez ceci, vous avez l'√¢me d'un pentester ! üòâ
-->
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Devoxx4Kids - Workshop Cybers√©curit√©</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url('./lion.png');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(128, 64, 0, 0.9);
            padding: 15px 20px;
            backdrop-filter: blur(10px);
            z-index: 100;
        }

        .header h1 {
            text-align: center;
            font-size: 2rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .carousel-container {
            position: relative;
            width: 900px;
            height: 600px;
            perspective: 1200px;
            margin-top: 100px;
        }

        .carousel {
            position: relative;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            transition: transform 0.8s cubic-bezier(0.4, 0.0, 0.2, 1);
        }

        .carousel-item {
            position: absolute;
            width: 450px;
            height: 350px;
            left: 50%;
            top: 50%;
            transform-origin: center;
            border-radius: 20px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4);
            overflow: hidden;
            transition: all 0.8s cubic-bezier(0.4, 0.0, 0.2, 1);
            cursor: pointer;
        }

        .carousel-item.active {
            transform: translate(-50%, -50%) translateZ(250px) scale(1.1);
            z-index: 10;
            opacity: 1;
        }

        .carousel-item.prev {
            transform: translate(-70%, -50%) translateZ(-150px) rotateY(35deg) scale(0.8);
            z-index: 5;
            opacity: 0.7;
        }

        .carousel-item.next {
            transform: translate(-30%, -50%) translateZ(-150px) rotateY(-35deg) scale(0.8);
            z-index: 5;
            opacity: 0.7;
        }

        .carousel-item.hidden {
            opacity: 0;
            visibility: hidden;
            transform: translate(-50%, -50%) translateZ(-500px) scale(0.5);
            z-index: 1;
        }

        .item-content {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
            padding: 30px;
            background: linear-gradient(135deg, var(--bg-color1), var(--bg-color2));
            position: relative;
        }

        .item-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.2), transparent);
            pointer-events: none;
        }

        .item-content h2 {
            font-size: 2rem;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .item-content p {
            font-size: 1.1rem;
            line-height: 1.6;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
            margin-bottom: 20px;
        }

        .play-btn {
            padding: 12px 24px;
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 16px;
            font-weight: bold;
            text-transform: uppercase;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .play-btn:hover {
            background-color: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.6);
            transform: translateY(-2px);
        }

        /* Couleurs pour chaque activit√© */
        .activity1 { --bg-color1: #FF6B6B; --bg-color2: #4ECDC4; }
        .activity2 { --bg-color1: #45B7D1; --bg-color2: #96CEB4; }
        .activity3 { --bg-color1: #FECA57; --bg-color2: #FF9FF3; }
        .activity4 { --bg-color1: #6C5CE7; --bg-color2: #A29BFE; }
        .activity5 { --bg-color1: #FD79A8; --bg-color2: #FDCB6E; }
        .activity6 { --bg-color1: #E17055; --bg-color2: #81ECEC; }
        .activity7 { --bg-color1: #00B894; --bg-color2: #00CEC9; }
        .activity8 { --bg-color1: #667eea; --bg-color2: #764ba2; }
        .activity9 { --bg-color1: #e74c3c; --bg-color2: #f39c12; }
        .activity10 { --bg-color1: #E84393; --bg-color2: #9B59B6; }

        /* Boutons de navigation */
        .nav-button {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            width: 70px;
            height: 70px;
            border-radius: 50%;
            font-size: 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            z-index: 20;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .nav-button:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.6);
            transform: translateY(-50%) scale(1.1);
        }

        .prev-btn {
            left: 50px;
        }

        .next-btn {
            right: 50px;
        }

        /* Indicateurs */
        .indicators {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 15px;
            z-index: 20;
            flex-wrap: wrap;
            justify-content: center;
            max-width: 400px;
        }

        .indicator {
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.4);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .indicator.active {
            background: white;
            transform: scale(1.4);
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.6);
        }

        /* Overlay pour les modals */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal {
            background: #1f2731;
            border-radius: 15px;
            padding: 30px;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            color: white;
            position: relative;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-bottom: 2px solid #ff4655;
            margin-bottom: 20px;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            color: #ff4655;
            cursor: pointer;
            padding: 0;
            line-height: 1;
        }

        .close-btn:hover {
            color: #cc0000;
            transform: scale(1.2);
            transition: all 0.2s ease;
        }

        /* Croix CGU presque invisible */
        .close {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 28px;
            font-weight: bold;
            color: rgba(255, 255, 255, 0.01);
            cursor: pointer;
            background: none;
            border: none;
            z-index: 1000;
        }

        .close:hover {
            color: rgba(255, 255, 255, 0.3);
        }

        .btn {
            padding: 12px 24px;
            background-color: #ff8000;
            color: white;
            font-size: 16px;
            font-weight: bold;
            text-transform: uppercase;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
            margin: 5px;
        }

        .btn:hover {
            background-color: #e43f4e;
        }

        /* Animation d'entr√©e */
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translate(-50%, -50%) translateY(50px);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%) translateZ(250px) scale(1.1);
            }
        }

        .carousel-item.active {
            animation: slideIn 0.8s ease-out;
        }

        /* Styles pour Password Fortress */
        .password-game {
            padding: 20px;
            max-width: 500px;
            margin: 0 auto;
        }
        
        .password-input {
            width: 100%;
            padding: 15px;
            font-size: 18px;
            border: 2px solid #ddd;
            border-radius: 8px;
            margin: 15px 0;
            background-color: #f8f9fa;
            color: #333;
        }
        
        .strength-meter {
            width: 100%;
            height: 25px;
            background-color: #e0e0e0;
            border-radius: 12px;
            overflow: hidden;
            margin: 15px 0;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .strength-fill {
            height: 100%;
            width: 0%;
            transition: all 0.5s ease;
            border-radius: 12px;
        }
        
        .strength-weak { background-color: #ff4655; width: 25%; }
        .strength-medium { background-color: #ff8000; width: 50%; }
        .strength-good { background-color: #f1c40f; width: 75%; }
        .strength-strong { background-color: #27ae60; width: 100%; }
        
        .crack-time {
            padding: 15px;
            background-color: rgba(52, 152, 219, 0.1);
            border-radius: 8px;
            font-weight: bold;
            font-size: 16px;
            text-align: center;
            border: 2px solid rgba(52, 152, 219, 0.2);
            margin: 15px 0;
        }
        
        .requirements {
            margin: 15px 0;
        }
        
        .requirement {
            padding: 8px;
            border-radius: 4px;
            font-size: 14px;
            display: flex;
            align-items: center;
            margin: 5px 0;
            transition: all 0.3s ease;
        }
        
        .requirement.met {
            background-color: rgba(39, 174, 96, 0.2);
            color: #27ae60;
        }
        
        .requirement.unmet {
            background-color: rgba(255, 70, 85, 0.2);
            color: #ff4655;
        }
        
        .requirement::before {
            content: '‚úì';
            margin-right: 8px;
            font-weight: bold;
        }
        
        .requirement.unmet::before {
            content: '‚úó';
        }
        
        .loading-passwords {
            text-align: center;
            padding: 10px;
            background-color: rgba(52, 152, 219, 0.1);
            border-radius: 6px;
            margin: 10px 0;
            font-style: italic;
        }

        .email-header {
            background: #0078d4;
            color: white;
            padding: 15px;
            border-radius: 8px 8px 0 0;
            margin-bottom: 10px;
        }

        .email-content {
            background: white;
            color: black;
            padding: 20px;
            border-radius: 0 0 8px 8px;
            border: 1px solid #ddd;
        }
        
        .clickable-error {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .clickable-error:hover {
            background: rgba(255, 70, 85, 0.2);
            padding: 2px 4px;
            border-radius: 3px;
            transform: scale(1.02);
        }
        
        .clickable-error.found {
            background: rgba(76, 175, 80, 0.2);
            padding: 2px 4px;
            border-radius: 3px;
            border: 1px dashed #4CAF50;
        }
        
        .suspicious-link {
            color: #ff4655 !important;
            text-decoration: underline;
            font-weight: bold;
        }
        
        .email-subject {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .game-counter {
            background: rgba(52, 152, 219, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid #3498db;
        }
        
        .progress-bar {
            width: 100%;
            height: 20px;
            background: rgba(255,255,255,0.3);
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #45a049);
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 10px;
        }
        
        .explanation-box {
            background: rgba(255, 255, 255, 0.95);
            border: 2px solid #4CAF50;
            border-left: 6px solid #388e3c;
            border-radius: 10px;
            padding: 18px;
            margin: 15px 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            color: #2c3e50;
        }
        
        .explanation-title {
            font-weight: bold;
            color: #2e7d32;
            margin-bottom: 12px;
            font-size: 17px;
        }
        
        .explanation-text {
            color: #2c3e50;
            line-height: 1.6;
            font-weight: 500;
        }
        
        .victory-message {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin: 20px 0;
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }
        
        .hint-button, .solution-button {
            background: #f39c12;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .hint-button:hover, .solution-button:hover {
            background: #d68910;
            transform: translateY(-2px);
        }
        
        .why-dangerous {
            background: rgba(255, 255, 255, 0.95);
            border-left: 4px solid #c0392b;
            padding: 12px;
            margin: 10px 0;
            border-radius: 0 8px 8px 0;
            color: #2c3e50;
            border: 1px solid #c0392b;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }
        
        .why-dangerous strong {
            color: #c0392b;
            font-weight: bold;
        }
        
        .detection-tip {
            background: rgba(255, 255, 255, 0.95);
            border-left: 4px solid #2980b9;
            padding: 12px;
            margin: 10px 0;
            border-radius: 0 8px 8px 0;
            color: #2c3e50;
            border: 1px solid #2980b9;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }
        
        .detection-tip strong {
            color: #2980b9;
            font-weight: bold;
        }
        
        .red-flag {
            background: rgba(231, 76, 60, 0.08);
            border: 1px solid #e74c3c;
            border-radius: 8px;
            padding: 16px;
            margin: 12px 0;
            box-shadow: 0 2px 6px rgba(231, 76, 60, 0.15);
            color: #2c3e50;
        }
        
        /* Styles pour Terms of Service */
        .tos-content {
            margin-top: 20px;
            height: 300px;
            overflow-y: scroll;
            padding: 15px;
            background-color: #0f1923;
            border-radius: 4px;
            font-size: 14px;
            line-height: 1.6;
            color: white;
        }
        
        .important-clause {
            font-size: 18px;
            font-weight: bold;
            color: #ff4655;
            margin: 20px 0;
            padding: 10px;
            border: 2px solid #ff4655;
            background-color: rgba(255, 70, 85, 0.1);
            text-align: center;
        }
        
        .login-options {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
            gap: 15px;
        }
        
        .login-button {
            width: 60px;
            height: 60px;
            border: 2px solid #ddd;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 8px;
        }
        
        .login-button:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        .login-button img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
        
        .login-form {
            display: none;
            margin-top: 20px;
            background-color: #0f1923;
            padding: 20px;
            border-radius: 4px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: white;
        }
        
        .form-group input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            background-color: #2c3e50;
            color: white;
        }
        
        .submit-btn {
            background-color: #ff4655;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            width: 100%;
            margin-top: 10px;
        }
        
        /* Easter Egg Header */
        .header h1:hover {
            text-shadow: 2px 2px 4px rgba(255, 255, 255, 0.3), 0 0 10px rgba(255, 255, 255, 0.2);
            transform: scale(1.02);
            transition: all 0.3s ease;
        }
        
        .webcam-container {
            text-align: center;
            padding: 20px;
        }
        
        .webcam-warning {
            margin-top: 20px;
        }
        
        .webcam-warning h3 {
            color: #ff4655;
            margin-bottom: 15px;
        }
        
        .important-note {
            background: rgba(76, 175, 80, 0.1);
            border: 1px solid #4CAF50;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
            color: #2c3e50;
            font-style: italic;
        }
        
        /* Matrix Easter Egg Styles */
        .matrix-stats {
            text-align: left;
            max-width: 800px;
            margin: 20px auto;
        }
        
        .cyber-stat {
            margin: 15px 0;
            padding: 10px 15px;
            background: rgba(0, 255, 0, 0.1);
            border-left: 3px solid #00ff00;
            font-family: 'Courier New', monospace;
            animation: matrixGlow 2s ease-in-out infinite alternate;
        }
        
        @keyframes matrixGlow {
            from { text-shadow: 0 0 5px #00ff00; }
            to { text-shadow: 0 0 15px #00ff00, 0 0 25px #00ff00; }
        }

        .wifi-network {
            background: rgba(52, 152, 219, 0.2);
            border: 1px solid #3498db;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .wifi-network:hover {
            background: rgba(52, 152, 219, 0.3);
            transform: translateY(-2px);
        }

        .wifi-result {
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
            font-weight: bold;
            text-align: center;
        }

        .spinner {
            display: inline-block;
            transition: transform 0.3s ease;
        }

        .reload-btn:hover .spinner {
            animation: rotate 1s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .carousel-container {
                width: 90vw;
                height: 500px;
            }
            
            .carousel-item {
                width: 350px;
                height: 280px;
            }
            
            .item-content h2 {
                font-size: 1.5rem;
            }
            
            .nav-button {
                width: 50px;
                height: 50px;
                font-size: 1.5rem;
            }

            .modal {
                max-width: 95vw;
                margin: 10px;
            }

            .video-container iframe {
                width: 100%;
                height: 250px;
            }
        }

        /* === √âCRAN D'ACCUEIL LOCKED/UNLOCKED === */
        .welcome-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 50%, #1a1a1a 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding-bottom: 180px;
            z-index: 9999;
            transition: opacity 0.8s ease-in-out;
        }

        .welcome-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .lock-container {
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
            filter: drop-shadow(0 10px 20px rgba(0, 0, 0, 0.5));
            width: 400px;
            height: auto;
            margin-top: 10px;
            max-width: 80vw;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .lock-image {
            width: 100%;
            height: auto;
            position: absolute;
            top: 0;
            left: 0;
            transition: opacity 0.8s ease-in-out;
        }

        .lock-image.locked {
            opacity: 1;
        }

        .lock-image.unlocked {
            opacity: 0;
        }

        .lock-image.unlocked.show {
            opacity: 1;
        }

        .lock-image.locked.hide {
            opacity: 0;
        }

        .welcome-title {
            color: #fff;
            font-size: 2.5rem;
            font-weight: 700;
            text-align: center;
            margin: 5;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
            opacity: 0;
            animation: fadeInUp 1s ease-out 0.5s forwards;
        }

        .welcome-subtitle {
            color: #ccc;
            font-size: 1.2rem;
            text-align: center;
            margin: 10px 0 0 0;
            opacity: 0;
            animation: fadeInUp 1s ease-out 1s forwards;
        }

        .language-selector {
            display: flex;
            gap: 80px;
            margin-top: 300px;
            opacity: 0;
            animation: fadeInUp 1s ease-out 2s forwards;
        }

        .language-flag {
            width: 60px;
            height: 40px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
            overflow: hidden;
        }

        .language-flag:hover {
            transform: scale(1.6);
            filter: drop-shadow(0 6px 12px rgba(0, 0, 0, 0.4));
        }

        .language-flag.selected {
            transform: scale(1.15);
            filter: drop-shadow(0 8px 16px rgba(255, 255, 255, 0.3));
            border: 3px solid #fff;
        }

        /* Drapeaux - Cr√©dit images : https://pixabay.com/fr/users/openclipart-vectors-30363/ */
        .flag-fr {
            background-image: url('./png/FR.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }

        .flag-nl {
            background-image: url('./png/NL.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }

        .flag-en {
            background-image: url('./png/UK.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }

        .language-label {
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            color: #ccc;
            font-size: 0.8rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .click-hint {
            position: absolute;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%);
            color: #888;
            font-size: 1rem;
            opacity: 0;
            animation: fadeInUp 1s ease-out 1.5s forwards, pulse 2s ease-in-out 2.5s infinite;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 0.6;
            }
            50% {
                opacity: 1;
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 2rem;
            }

            .welcome-subtitle {
                font-size: 1rem;
                padding: 0 20px;
            }

            .lock-image {
                width: 300px;
            }
        }
    </style>
    <!-- 
        üé® CSS SECRETS üé®
        Les d√©veloppeurs cachent parfois des messages secrets dans le CSS...
        transform: perspective(1200px) rotateY(calc(var(--rotation) * 1deg));
        Saviez-vous que Matrix utilisait du code CSS en cascade ? üòâ
    -->
</head>
<body>
    <!-- === √âCRAN D'ACCUEIL LOCKED/UNLOCKED === -->
    <div class="welcome-screen" id="welcomeScreen">
        <h1 class="welcome-title">üõ°Ô∏è Cyber security Workshop</h1>
        <p class="welcome-subtitle"  traduction="welcome.subtitle"> </p>
            <div class="lock-container" id="lockContainer">
                <img src="./png/Locked.png" alt="Workshop verrouill√©" class="lock-image locked" id="lockedImage">
                <img src="./png/Unlocked.png" alt="Workshop d√©verrouill√©" class="lock-image unlocked" id="unlockedImage">
            </div>
        <!-- S√©lecteur de langue -->
        <div class="language-selector" id="languageSelector">
            <div class="language-flag flag-fr" onclick="selectLanguage('fr')" title="Fran√ßais">
                <div class="language-label">FR</div>
            </div>
            <div class="language-flag flag-nl" onclick="selectLanguage('nl')" title="Nederlands">
                <div class="language-label">NL</div>
            </div>
            <div class="language-flag flag-en" onclick="selectLanguage('en')" title="English">
                <div class="language-label">EN</div>
            </div>
        </div>

        <div class="click-hint" traduction="welcome.instruction"></div>
    </div>

    <!--
        üîç HTML NINJA LEVEL üîç
        Vous explorez le DOM comme un vrai hacker !
        Fun fact: Tim Berners-Lee a cr√©√© le HTML en 1990
        Easter egg bonus: Regardez l'attribut onclick du header üëÜ
    -->
    <div class="header">
        <h1 onclick="triggerWebcamEasterEgg()" style="cursor: pointer;">üõ°Ô∏è Devoxx4Kids -  Workshop üõ°Ô∏è</h1>
    </div>

    <div class="carousel-container">
        <div class="carousel" id="carousel">
            <!-- Fantasy Quest -->
            <!-- Confidentialit√© -->
            <div class="carousel-item active" data-index="0" data-game="confidential">
                <div class="item-content activity1">
                    <h2 traduction="carousel.confidentiality.title"></h2>
                    <p traduction="carousel.confidentiality.subtitle"></p>
                    <button class="play-btn" traduction="carousel.confidentiality.button"></button>
                </div>
            </div>


            <!-- Deepfake -->
            <div class="carousel-item next" data-index="1" data-game="deepfake">
                <div class="item-content activity2">
                    <h2 traduction="carousel.deepfake.title"></h2>
                    <p traduction="carousel.deepfake.subtitle"></p>
                    <button class="play-btn" traduction="carousel.deepfake.button"></button>
                </div>
            </div>

            <!-- Password Fortress -->
            <div class="carousel-item hidden" data-index="2" data-game="password-fortress">
                <div class="item-content activity3">
                    <h2 traduction="carousel.fortress.title"></h2>
                    <p traduction="carousel.fortress.subtitle"></p>
                    <button class="play-btn" traduction="carousel.fortress.button"></button>
                </div>
            </div>

            <!-- Email Pi√®ge -->
            <div class="carousel-item hidden" data-index="3" data-game="email-phishing">
                <div class="item-content activity4">
                    <h2 traduction="carousel.spam.title"></h2>
                    <p traduction="carousel.spam.subtitle"></p>
                    <button class="play-btn" traduction="carousel.spam.button"></button>
                </div>
            </div>

            <!-- WiFi Pi√®ge -->
            <div class="carousel-item hidden" data-index="4" data-game="wifi-trap">
                <div class="item-content activity5">
                    <h2 traduction="carousel.wifi.title"></h2>
                    <p traduction="carousel.wifi.subtitle"></p>
                    <button class="play-btn" traduction="carousel.wifi.button"></button>
                </div>
            </div>

            <!-- R√©seaux Sociaux -->
            <div class="carousel-item hidden" data-index="5" data-game="social-media-video">
                <div class="item-content activity6">
                    <h2 traduction="carousel.social.title"></h2>
                    <p traduction="carousel.social.subtitle"></p>
                    <button class="play-btn" traduction="carousel.social.button"></button>
                </div>
            </div>

            <!-- Quiz S√©curit√© - √âVALUATION FINALE -->
            <div class="carousel-item hidden" data-index="6" data-game="quizz">
                <div class="item-content activity7">
                    <h2 traduction="carousel.quiz.title"></h2>
                    <p traduction="carousel.quiz.subtitle"></p>
                    <button class="play-btn" traduction="carousel.quiz.button" ></button>
                </div>
            </div>

            <!-- Questions pour un champion -->
            <div class="carousel-item hidden" data-index="7" data-game="questions-champion">
                <div class="item-content activity8">
                    <h2 traduction="carousel.champion.title"></h2>
                    <p traduction="carousel.champion.subtitle"></p>
                    <button class="play-btn" traduction="carousel.champion.button"></button>
                </div>
            </div>

            <!-- Site Suspect - D√©tection de Fraude -->
            <div class="carousel-item hidden" data-index="8" data-game="site-suspect">
                <div class="item-content activity9">
                    <h2 traduction="carousel.promo.title"></h2>
                    <p traduction="carousel.promo.subtitle"></p>
                    <button class="play-btn" traduction="carousel.champion.button"></button>
                </div>
            </div>

            <!-- Fantasy Quest - EASTER EGG UNLOCK -->
            <div class="carousel-item hidden fantasy-quest-locked" data-index="9" data-game="fantasy-quest" style="opacity: 0.3; pointer-events: none;">
                <div class="item-content activity10">
                    <h2 traduction="carousel.fantasy.title"></h2>
                    <p traduction="carousel.fantasy.locked_subtitle"></p>
                    <button class="play-btn" disabled traduction="carousel.fantasy.locked"></button>
                </div>
            </div>
        </div>

        <button class="nav-button prev-btn" id="prevBtn">‚ùÆ</button>
        <button class="nav-button next-btn" id="nextBtn">‚ùØ</button>

        <div class="indicators">
            <div class="indicator active" data-index="0"></div>
            <div class="indicator" data-index="1"></div>
            <div class="indicator" data-index="2"></div>
            <div class="indicator" data-index="3"></div>
            <div class="indicator" data-index="4"></div>
            <div class="indicator" data-index="5"></div>
            <div class="indicator" data-index="6"></div>
            <div class="indicator" data-index="7"></div>
            <div class="indicator fantasy-indicator" data-index="8"></div>
        </div>
    </div>

    <!-- Modal Password Fortress -->
    <div class="overlay" id="passwordOverlay" style="display: none;">
        <div class="modal">
            <h2 traduction="carousel.fortress.tab.title"></h2>
            <div class="password-game">
                <h3 traduction="carousel.fortress.tab.key_points"></h3>
                <input type="text" id="passwordInput" class="password-input" placeholder-traduction="carousel.fortress.tab.password-placeholder"  autocomplete="off">
                
                <div class="strength-meter">
                    <div class="strength-fill" id="strengthFill"></div>
                </div>
                
                <div class="crack-time" id="crackTime">
                    Temps de craquage : Instantan√© ‚ö°
                </div>
                
                <div class="requirements" id="requirements">
                    <div class="requirement unmet" id="req-length" traduction="carousel.fortress.tab.criteria.length"></div>
                    <div class="requirement unmet" id="req-lower" traduction="carousel.fortress.tab.criteria.low"></div>
                    <div class="requirement unmet" id="req-upper" traduction="carousel.fortress.tab.criteria.capital"></div>
                    <div class="requirement unmet" id="req-number" traduction="carousel.fortress.tab.criteria.digit"></div>
                    <div class="requirement unmet" id="req-special" traduction="carousel.fortress.tab.criteria.special"></div>
                    <div class="requirement unmet" id="req-no-common" traduction="carousel.fortress.tab.criteria.unknown"></div>
                </div>
                <button class="btn" onclick="closePasswordGame()" traduction="carousel.fortress.tab.close"></button>
            </div>
        </div>
    </div>
    
    <!-- Modal Email Phishing -->
    <div class="overlay" id="emailOverlay" style="display: none;">
        <div class="modal">
            <div class="modal-header" style="display: flex; justify-content: space-between; align-items: center; padding: 15px; border-bottom: 2px solid #ff4655; margin-bottom: 20px;">
                <h2 style="margin: 0; color: #ff4655;" traduction="carousel.spam.tab.title"></h2>
                <div class="header-buttons" style="display: flex; gap: 10px; align-items: center;">
                    <button class="reload-btn" onclick="generateNewEmail()" style="background: transparent; border: none; font-size: 24px; cursor: pointer; padding: 8px;"><span class="spinner">üîÑ</span></button>
                    <button class="close-btn" onclick="closeEmailGame()" style="background: none; border: none; font-size: 24px; color: #ff4655; cursor: pointer; padding: 0; line-height: 1;">&times;</button>
                </div>
            </div>
            <div class="email-container" id="emailContainer">
                <!-- L'email sera g√©n√©r√© dynamiquement -->
            </div>
            <div class="analysis-panel" id="analysisPanel">
                <h3 traduction="carousel.spam.tab.analyse"></h3>
                <p traduction="carousel.spam.tab.insight"></p>
                <button class="btn" onclick="window.open('https://phishingquiz.withgoogle.com', '_blank')" traduction="carousel.spam.tab.more"></button>
            </div>
        </div>
    </div>

    <!-- Modal WiFi Pi√®ge -->
    <div class="overlay" id="wifiOverlay" style="display: none;">
        <div class="modal">
            <h2 traduction="carousel.wifi.title"></h2>
            <div class="wifi-game">
                <h3 id="wifiSituation" traduction="carousel.wifi.situation"></h3>
                <p traduction="carousel.wifi.subtitle"></p>
                <div id="wifiNetworks">
                    <!-- Les r√©seaux WiFi seront g√©n√©r√©s dynamiquement -->
                </div>
                <div id="wifiResult" class="wifi-result" style="display: none;"></div>
                <button class="btn" onclick="generateNewWifiScenario()" traduction="carousel.wifi.tab.new"></button>
                <button class="btn" onclick="closeWifiGame()" traduction="carousel.wifi.tab.close"></button>
            </div>
        </div>
    </div>
    
    <!-- Modal Vid√©o R√©seaux Sociaux -->
    <div class="overlay" id="socialMediaOverlay" style="display: none;">
        <div class="modal">
            <h2 traduction="carousel.social.tab.title"></h2>
            <div class="video-container" style="text-align: center; margin: 20px 0;">
                <iframe id="socialMediaVideo" width="560" height="315" 
                    src="" 
                    frameborder="0" 
                    allow="autoplay; encrypted-media" 
                    allowfullscreen
                    style="border-radius: 8px; max-width: 100%;">
                </iframe>
            </div>
            <div class="analysis-panel">
                <h3 traduction="carousel.social.tab.key_points">></h3>
                <div class="red-flags" style="background-color: rgba(231, 76, 60, 0.2); padding: 15px; margin: 10px 0; border-radius: 8px; border-left: 4px solid #e74c3c;">
                    <h4 traduction="carousel.social.tab.warning.title"></h4>
                    <ul id="social-warning">
                        <!-- Les <li> seront g√©n√©r√©s automatiquement -->
                    </ul>
                </div>
                
                <div class="explanation" style="background-color: rgba(52, 152, 219, 0.2); padding: 15px; margin: 10px 0; border-radius: 8px; border-left: 4px solid #3498db;">
                    <h4 traduction="carousel.social.tab.tips.title"></h4>
                    <ul id="social-tips">
                        <!-- Les <li> seront g√©n√©r√©s automatiquement -->
                   </ul>
               </div>
               <button class="btn" onclick="closeSocialMediaGame()" traduction="carousel.social.tab.close" >Fermer</button>
           </div>
       </div>
   </div>

   <!-- Modal Vid√©o Confidentialit√© -->
    <div class="overlay" id="confidentialityOverlay" style="display: none;">
        <div class="modal">
            <h2 traduction="carousel.confidentiality.tab.title"></h2>
            <div class="video-container" style="text-align: center; margin: 20px 0;">
                <iframe id="confidentialityVideo" width="560" height="315" 
                    src="" 
                    frameborder="0" 
                    allow="autoplay; encrypted-media" 
                    allowfullscreen
                    style="border-radius: 8px; max-width: 100%;">
                </iframe>
            </div>
            <div class="analysis-panel">
                <h3 traduction="carousel.confidentiality.tab.key_points"></h3>
                <div class="red-flags" style="background-color: rgba(231, 76, 60, 0.2); padding: 15px; margin: 10px 0; border-radius: 8px; border-left: 4px solid #e74c3c;">
                    <h4 traduction="carousel.confidentiality.tab.warning.title"></h4>
                    <ul id="confidentiality-warning">
                        <!-- Les <li> seront g√©n√©r√©s automatiquement -->
                    </ul>
                </div>

                <div class="explanation" style="background-color: rgba(52, 152, 219, 0.2); padding: 15px; margin: 10px 0; border-radius: 8px; border-left: 4px solid #3498db;">
                    <h4 traduction="carousel.confidentiality.tab.tips.title"></h4>
                    <ul id="confidentiality-tips">
                        <!-- Les <li> seront g√©n√©r√©s automatiquement -->
                    </ul>
                </div>

                <button class="btn" onclick="closeConfidentialityGame()" traduction="carousel.confidentiality.tab.close"></button>
            </div>
        </div>
    </div>
    
    
    <!-- Modal Vid√©o Deepfake -->
    <div class="overlay" id="deepfakeOverlay" style="display: none;">
        <div class="modal">
            <h2 traduction="carousel.deepfake.tab.title"></h2>
            <div class="video-container" style="text-align: center; margin: 20px 0;">
                <iframe id="deepfakeVideo" width="560" height="315" 
                    src="" 
                    frameborder="0" 
                    allow="autoplay; encrypted-media" 
                    allowfullscreen
                    style="border-radius: 8px; max-width: 100%;">
                </iframe>
            </div>
            <div class="analysis-panel">
                <h3 traduction="carousel.deepfake.tab.key_points"></h3>
                <div class="red-flags" style="background-color: rgba(231, 76, 60, 0.2); padding: 15px; margin: 10px 0; border-radius: 8px; border-left: 4px solid #e74c3c;">
                    <h4 traduction="carousel.deepfake.tab.warning.title"></h4>
                    <ul id="deepfake-warning">
                        <!-- Les <li> seront g√©n√©r√©s automatiquement -->
                    </ul>
                </div>
                
                <div class="explanation" style="background-color: rgba(52, 152, 219, 0.2); padding: 15px; margin: 10px 0; border-radius: 8px; border-left: 4px solid #3498db;">
                    <h4 traduction="carousel.deepfake.tab.tips.title"></h4>
                    <ul id="deepfake-tips">
                    </ul>
                </div>
                
                <button class="btn" onclick="closeDeepfakeGame()" traduction="carousel.deepfake.tab.close"></button>
            </div>
        </div>
    </div>

    <!-- Easter egg d√©plac√© sur le header -->

    <!-- Matrix Canvas for Konami Easter Egg -->
    <canvas id="matrix-canvas" style="display: none; position: fixed; top: 0; left: 0; z-index: 1000;"></canvas>
    
    <!-- Modal Matrix Easter Egg -->
    <div class="overlay" id="matrixOverlay" style="display: none; z-index: 1001;">
        <div class="modal" style="background: rgba(0, 20, 0, 0.95); border: 2px solid #00ff00; color: #00ff00;">
            <h2 style="color: #00ff00; text-shadow: 0 0 20px #00ff00;" traduction="carousel.matrix.title"></h2>
            <div style="color: #00ff00; text-align: center; margin: 15px 0; font-size: 1.1rem; opacity: 0.8; font-family: 'Courier New', monospace; animation: glow 3s ease-in-out infinite alternate;">
                Syst√®me cr√©√© par Kamel Zaraoui 2025
            </div>
            <div class="matrix-stats" id="matrix-div">
                <h3 style="color: #00ff00; margin-bottom: 20px;" traduction="carousel.matrix.subtitle"></h3>
            </div>
            <button class="btn" onclick="closeMatrix()" style="background: rgba(0, 255, 0, 0.2); border: 2px solid #00ff00; color: #00ff00; margin-top: 20px;" traduction="carousel.matrix.close"></button>
        </div>
    </div>

    <!-- Modal Webcam Easter Egg -->
    <div class="overlay" id="webcamOverlay" style="display: none;">
        <div class="modal">
            <h2 traduction="carousel.webcam.title"></h2>
            <div class="webcam-container">
                <video id="webcamVideo" autoplay playsinline style="width: 100%; max-width: 400px; border-radius: 8px;"></video>
                <div class="webcam-warning">
                    <h3 traduction="carousel.webcam.surprise.title"></h3>
                    <p traduction="carousel.webcam.surprise.info"></p>
                    
                    <div class="explanation-box">
                        <div class="explanation-title" traduction="carousel.webcam.surprise.advice.title"></div>
                        <div class="explanation-text">
                            <ul id="webcam-advice">
                                <!-- generate automatically -->
                            </ul>
                        </div>
                    </div>
                    
                    <div class="important-note" traduction="carousel.webcam.relax">
                    </div>
                </div>
            </div>
            <div style="text-align: center; margin-top: 20px;">
                <button class="btn" onclick="closeWebcamEasterEgg()">Fermer et Arr√™ter la Cam√©ra</button>
            </div>
        </div>
    </div>

    <!-- Modal Terms of Service -->
    <div class="overlay" id="tosOverlay">
        <div class="modal">
            <span class="close" id="closeModal">&times;</span>
            <h2 traduction="conditions.title"></h2>
            <div class="tos-content" id="tosContent">

            </div>
            <div>
                <input type="checkbox" id="tosAccept">
                <label for="tosAccept" traduction="conditions.confirm"></label>
            </div>
            <div class="login-options">
                <button class="login-button" id="googleLogin" title="Google">
                    <img src="png/google.svg" alt="Google">
                </button>
                <button class="login-button" id="instagramLogin" title="Instagram">
                    <img src="png/Instagram.svg" alt="Instagram">
                </button>
                <button class="login-button" id="snapchatLogin" title="Snapchat">
                    <img src="png/snapchat.svg" alt="Snapchat">
                </button>
                <button class="login-button" id="tiktokLogin" title="TikTok">
                    <img src="png/tiktok.svg" alt="TikTok">
                </button>
            </div>
            
            <!-- Google Login Form -->
            <div class="login-form" id="googleForm">
                <h3 traduction="conditions.google.title"></h3>
                <div class="form-group">
                    <label for="googleEmail" traduction="conditions.google.user"></label>
                    <input type="text" id="googleEmail" placeholder-traduction="conditions.google.user_instruction">
                </div>
                <div class="form-group">
                    <label for="googlePassword" traduction="conditions.google.password"></label>
                    <input type="password" id="googlePassword" placeholder-traduction="conditions.google.password_instruction">
                </div>
                <button class="submit-btn" id="googleSubmit" traduction="conditions.connect"></button>
            </div>
            
            <!-- Instagram Login Form -->
            <div class="login-form" id="instagramForm">
                <h3 traduction="conditions.instagram.title"></h3>
                <div class="form-group">
                    <label for="instagramUsername" traduction="conditions.instagram.user"></label>
                    <input type="text" id="instagramUsername" placeholder-traduction="conditions.instagram.user_instruction">
                </div>
                <div class="form-group">
                    <label for="instagramPassword" traduction="conditions.instagram.password" ></label>
                    <input type="password" id="instagramPassword" placeholder-traduction="conditions.instagram.password_instruction">
                </div>
                <button class="submit-btn" id="instagramSubmit" traduction="conditions.connect" ></button>
            </div>
            
            <!-- Snapchat Login Form -->
            <div class="login-form" id="snapchatForm">
                <h3 traduction="conditions.snapchat.title"></h3>
                <div class="form-group">
                    <label for="snapchatUsername" traduction="conditions.snapchat.user"></label>
                    <input type="text" id="snapchatUsername" placeholder-traduction="conditions.snapchat.user_instruction">
                </div>
                <div class="form-group">
                    <label for="snapchatPassword" traduction="conditions.snapchat.password"></label>
                    <input type="password" id="snapchatPassword" placeholder-traduction="conditions.snapchat.password_instruction">
                </div>
                <button class="submit-btn" id="snapchatSubmit" traduction="conditions.connect"></button>
            </div>
            
            <!-- TikTok Login Form -->
            <div class="login-form" id="tiktokForm">
                <h3 traduction="conditions.tiktok.title"></h3>
                <div class="form-group">
                    <label for="tiktokUsername" traduction="conditions.tiktok.user" ></label>
                    <input type="text" id="tiktokUsername" placeholder-traduction="conditions.tiktok.user_instruction">
                </div>
                <div class="form-group">
                    <label for="tiktokPassword" traduction="conditions.tiktok.password" ></label>
                    <input type="password" id="tiktokPassword" placeholder-traduction="conditions.tiktok.password_instruction">
                </div>
                <button class="submit-btn" id="tiktokSubmit" traduction="conditions.connect"></button>
            </div>
        </div>
    </div>

    <!-- Modal Questions pour un champion -->
    <div class="overlay" id="questionsChampionOverlay" style="display: none;">
        <div class="modal" style="max-width: 1200px; width: 90%; height: 90%; max-height: 800px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); backdrop-filter: blur(10px); border: 2px solid rgba(102, 126, 234, 0.3);">
            <h2 traduction="carousel.champion.tab.title"></h2>
            
            <div id="questionsChampionGame" style="display: flex; height: calc(100% - 60px); gap: 20px;">
                <!-- Sidebar -->
                <div id="questionsSidebar" style="width: 280px; height: 100%; display: flex; flex-direction: column; background: linear-gradient(135deg, rgba(255, 255, 255, 0.85) 0%, rgba(251, 146, 60, 0.15) 50%, rgba(255, 255, 255, 0.85) 100%); border-radius: 16px; padding: 20px; border: 2px solid rgba(251, 146, 60, 0.3);">
                    <h3 style="text-align: center; color: #ea580c; margin-bottom: 20px;" traduction="carousel.champion.tab.subtitle"></h3>
                    
                    <div class="questions-menu-item active" onclick="switchQuestionsCategory('ai')" style="background: linear-gradient(135deg, #ea580c, #dc2626); color: white; padding: 16px; border-radius: 12px; margin-bottom: 12px; cursor: pointer; transition: all 0.3s ease;">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <span style="font-size: 1.2rem;">ü§ñ</span>
                            <div style="flex: 1;">
                                <div style="font-weight: 600; font-size: 0.9rem;">Intelligence Artificielle</div>
                                <div style="font-size: 0.75rem; opacity: 0.8;">Deepfakes, hallucinations...</div>
                            </div>
                            <span style="background: rgba(255,255,255,0.2); padding: 4px 8px; border-radius: 8px; font-size: 0.8rem;">12</span>
                        </div>
                    </div>
                    
                    <div class="questions-menu-item" onclick="switchQuestionsCategory('protection')" style="background: rgba(255,255,255,0.7); color: #1f2937; padding: 16px; border-radius: 12px; margin-bottom: 12px; cursor: pointer; transition: all 0.3s ease; border: 1px solid rgba(251, 146, 60, 0.2);">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <span style="font-size: 1.2rem;">üõ°Ô∏è</span>
                            <div style="flex: 1;">
                                <div style="font-weight: 600; font-size: 0.9rem;">Protection & Virus</div>
                                <div style="font-size: 0.75rem; opacity: 0.9; color: #4b5563;">VPN, malwares, symptoms...</div>
                            </div>
                            <span style="background: rgba(234, 88, 12, 0.2); color: #ea580c; padding: 4px 8px; border-radius: 8px; font-size: 0.8rem;">10</span>
                        </div>
                    </div>
                    
                    <div class="questions-menu-item" onclick="switchQuestionsCategory('mobile')" style="background: rgba(255,255,255,0.7); color: #1f2937; padding: 16px; border-radius: 12px; margin-bottom: 12px; cursor: pointer; transition: all 0.3s ease; border: 1px solid rgba(251, 146, 60, 0.2);">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <span style="font-size: 1.2rem;">üì±</span>
                            <div style="flex: 1;">
                                <div style="font-weight: 600; font-size: 0.9rem;">Mobile & Paiements</div>
                                <div style="font-size: 0.75rem; opacity: 0.9; color: #4b5563;">Apps, QR codes, s√©curit√©...</div>
                            </div>
                            <span style="background: rgba(234, 88, 12, 0.2); color: #ea580c; padding: 4px 8px; border-radius: 8px; font-size: 0.8rem;">8</span>
                        </div>
                    </div>
                    
                    <div class="questions-menu-item" onclick="switchQuestionsCategory('passwords')" style="background: rgba(255,255,255,0.7); color: #1f2937; padding: 16px; border-radius: 12px; margin-bottom: 12px; cursor: pointer; transition: all 0.3s ease; border: 1px solid rgba(251, 146, 60, 0.2);">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <span style="font-size: 1.2rem;">üîê</span>
                            <div style="flex: 1;">
                                <div style="font-weight: 600; font-size: 0.9rem;">Mots de passe</div>
                                <div style="font-size: 0.75rem; opacity: 0.9; color: #4b5563;">2FA, gestionnaires...</div>
                            </div>
                            <span style="background: rgba(234, 88, 12, 0.2); color: #ea580c; padding: 4px 8px; border-radius: 8px; font-size: 0.8rem;">6</span>
                        </div>
                    </div>
                    
                    <div class="questions-menu-item" onclick="switchQuestionsCategory('anecdotes')" style="background: rgba(255,255,255,0.7); color: #1f2937; padding: 16px; border-radius: 12px; margin-bottom: 12px; cursor: pointer; transition: all 0.3s ease; border: 1px solid rgba(251, 146, 60, 0.2);">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <span style="font-size: 1.2rem;">üì∞</span>
                            <div style="flex: 1;">
                                <div style="font-weight: 600; font-size: 0.9rem;">Anecdotes Tech</div>
                                <div style="font-size: 0.75rem; opacity: 0.9; color: #4b5563;">Faits incroyables mais vrais...</div>
                            </div>
                            <span style="background: rgba(234, 88, 12, 0.2); color: #ea580c; padding: 4px 8px; border-radius: 8px; font-size: 0.8rem;">15</span>
                        </div>
                    </div>
                    
                    <!-- Close Button -->
                    <div style="margin-top: auto; padding-top: 20px;">
                        <button class="btn" onclick="closeQuestionsChampionGame()" style="width: 100%; background: linear-gradient(135deg, #6b7280, #4b5563); color: white; padding: 12px; border: none; border-radius: 12px; cursor: pointer; font-weight: 600; transition: all 0.3s ease;" traduction="carousel.champion.tab.close">
                        </button>
                    </div>
                </div>
                
                <!-- Game Area -->
                <div style="flex: 1; display: flex; flex-direction: column;">
                    <!-- Header -->
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 20px; background: linear-gradient(135deg, rgba(251, 146, 60, 0.06) 0%, rgba(234, 88, 12, 0.04) 50%, rgba(251, 146, 60, 0.06) 100%); border-radius: 16px 16px 0 0;">
                        <div style="background: linear-gradient(135deg, #ea580c, #dc2626); color: white; padding: 12px 20px; border-radius: 12px; font-weight: 700;">
                            <span style="margin-right: 8px;">üéØ</span>
                            Score: <span id="questionsCorrectScore">0</span>/<span id="questionsAnsweredScore">0</span>
                        </div>
                    </div>
                    
                    <!-- Content Area -->
                    <div style="flex: 1; padding: 30px; text-align: center; perspective: 1000px; background: linear-gradient(135deg, rgba(251, 146, 60, 0.04) 0%, rgba(234, 88, 12, 0.03) 25%, rgba(249, 115, 22, 0.02) 50%, rgba(234, 88, 12, 0.03) 75%, rgba(251, 146, 60, 0.04) 100%); border-radius: 0 0 16px 16px;">
                        <!-- Game Section -->
                        <div id="questionsGameSection" style="display: block;">
                            <!-- Question Card Container -->
                            <div id="questionsCardContainer" style="position: relative; width: 100%; height: 400px; transform-style: preserve-3d; transition: transform 0.8s ease;">
                                <!-- Card Front -->
                                <div id="questionsCardFront" style="position: absolute; width: 100%; height: 100%; backface-visibility: hidden; display: flex; flex-direction: column; justify-content: center; border-radius: 16px; background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.92) 25%, rgba(241, 245, 249, 0.90) 50%, rgba(248, 250, 252, 0.92) 75%, rgba(255, 255, 255, 0.95) 100%); border: 2px solid rgba(251, 146, 60, 0.3); box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.8);">
                                    <div id="questionsQuestionText" style="font-size: 1.5rem; font-weight: 600; margin-bottom: 40px; color: #111827; line-height: 1.4; padding: 0 30px; text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);">
                                        L'Intelligence Artificielle peut t'aider √† faire tes devoirs, mais il faut toujours v√©rifier ses r√©ponses et respecter les r√®gles
                                    </div>
                                    
                                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 30px; padding: 0 30px;">
                                        <button class="questions-answer-btn" onclick="selectQuestionsAnswer(true)" traduction="carousel.champion.tab.buttons.true" style="background: linear-gradient(135deg, #10b981, #059669); color: white; padding: 16px 24px; border: none; border-radius: 12px; cursor: pointer; font-weight: 600; font-size: 1.1rem; transition: all 0.3s ease; box-shadow: 0 6px 12px rgba(16, 185, 129, 0.3);">
                                        </button>
                                        <button class="questions-answer-btn" onclick="selectQuestionsAnswer(false)" traduction="carousel.champion.tab.buttons.false" style="background: linear-gradient(135deg, #ef4444, #dc2626); color: white; padding: 16px 24px; border: none; border-radius: 12px; cursor: pointer; font-weight: 600; font-size: 1.1rem; transition: all 0.3s ease; box-shadow: 0 6px 12px rgba(239, 68, 68, 0.3);">
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Card Back -->
                                <div id="questionsCardBack" style="position: absolute; width: 100%; height: 100%; backface-visibility: hidden; transform: rotateY(180deg); display: flex; flex-direction: column; justify-content: center; align-items: center; border-radius: 16px; background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.92) 50%, rgba(255, 255, 255, 0.95) 100%); border: 2px solid rgba(251, 146, 60, 0.3); box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.8); padding: 30px;">
                                    <div style="text-align: center;">
                                        <div id="questionsResultIcon" style="font-size: 3rem; margin-bottom: 16px;">‚úÖ</div>
                                        <div id="questionsResultText" style="font-size: 1.5rem; font-weight: 600; margin-bottom: 24px; color: #111827; text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);" traduction="carousel.champion.tab.results.correct"></div>
                                        <div id="questionsExplanationContent" style="font-size: 1.1rem; line-height: 1.5; color: #1f2937; margin-bottom: 24px; text-shadow: 0 1px 1px rgba(255, 255, 255, 0.6);">
                                            L'IA peut √™tre un excellent outil d'aide, mais il est crucial de d√©velopper son esprit critique et de ne jamais accepter aveugl√©ment ses r√©ponses.
                                        </div>
                                        <button onclick="nextQuestionsQuestion()" traduction="carousel.champion.tab.buttons.next" style="background: linear-gradient(135deg, #ea580c, #dc2626); color: white; padding: 12px 24px; border: none; border-radius: 10px; cursor: pointer; font-weight: 600; font-size: 1rem; transition: all 0.3s ease; box-shadow: 0 6px 12px rgba(234, 88, 12, 0.3);">
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Final Score -->
                        <div id="questionsFinalScore" style="display: none; text-align: center; padding: 40px;">
                            <div id="questionsFinalEmoji" style="font-size: 4rem; margin: 24px 0;">üèÜ</div>
                            <h2 style="font-size: 2.2rem; margin-bottom: 16px; color: white; font-weight: 900; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);" traduction="carousel.champion.tab.final.title"></h2>
                            <p style="font-size: 1.3rem; margin-bottom: 24px; color: white; font-weight: 700; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);"  traduction="carousel.champion.tab.final.score_label">
                                <span id="questionsFinalScoreText" style="font-weight: 700; color: #ea580c;">0/0</span>
                            </p>
                            <p id="questionsFinalMessage" style="font-size: 1.2rem; margin-bottom: 32px; color: white; font-weight: 600; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);" traduction="carousel.champion.tab.final.messages.excellent"></p>
                            <button onclick="restartQuestionsGame()" style="background: linear-gradient(135deg, #ea580c, #dc2626); color: white; padding: 16px 32px; border: none; border-radius: 12px; cursor: pointer; font-weight: 700; font-size: 1.1rem; margin-top: 24px; transition: all 0.3s ease; box-shadow: 0 8px 16px rgba(234, 88, 12, 0.3);" traduction="carousel.champion.tab.buttons.replay">
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // === GESTION √âCRAN D'ACCUEIL LOCKED/UNLOCKED ===
        function unlockWorkshop() {
            const lockedImage = document.getElementById('lockedImage');
            const unlockedImage = document.getElementById('unlockedImage');
            const lockContainer = document.getElementById('lockContainer');
            const welcomeScreen = document.getElementById('welcomeScreen');

            // D√©sactiver le clic pour √©viter les doubles clics
            lockContainer.style.cursor = 'default';
            lockContainer.onclick = null;

            // Crossfade: Locked dispara√Æt, Unlocked appara√Æt
            lockedImage.classList.add('hide');
            unlockedImage.classList.add('show');

            // Apr√®s 2.5 secondes avec l'image unlocked, transition vers les CGU
            setTimeout(() => {
                // Fade out de l'√©cran d'accueil complet
                welcomeScreen.classList.add('hidden');

                // Apr√®s la transition, afficher les CGU
                setTimeout(() => {
                    welcomeScreen.style.display = 'none';
                    showTermsOfService();
                }, 800); // Dur√©e de l'animation CSS (0.8s)

            }, 2500); // Attendre 2.5 secondes avec l'image unlocked
        }

        function getCurrentLanguage() {
            return localStorage.getItem('workshop-language')|| 'en';
        }

        function showTermsOfService() {
            // Utiliser le syst√®me CGU existant
            const tosOverlay = document.getElementById('tosOverlay');
            if (tosOverlay) {
                tosOverlay.style.display = 'flex';
            } else {
                // Si les CGU ne sont pas trouv√©es, passer directement au workshop
                console.warn('CGU non trouv√©es, passage direct au workshop');
                // Ici on pourrait directement d√©marrer le workshop
            }
        }

        // === GESTION S√âLECTEUR DE LANGUE ===
        let translations = {}; // Stockage global des traductions
        let phishingEmails = {}; // Stockage global des emails de phishing

        async function loadTranslations(lang) {
            try {
                console.log(`Chargement des traductions ${lang}...`);
                const response = await fetch(`https://raw.githubusercontent.com/KamelZar/CyberQuestKids/feat/translations/html/translations/${lang}/config.json`);;

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                translations = await response.json();
                console.log(`Traductions ${lang} charg√©es:`, translations);

                // Charger les emails de phishing
                await loadPhishingEmails(lang);
            } catch (error) {
                console.error(`Erreur lors du chargement des traductions ${lang}:`, error);
                translations = {}; // Fallback vers objet vide
            }

        }

        async function loadPhishingEmails(lang) {
            try {
                console.log(`Chargement des emails de phishing ${lang}...`);
                const response = await fetch(`https://raw.githubusercontent.com/KamelZar/CyberQuestKids/feat/translations/html/translations/${lang}/phishing-emails.json`);

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                phishingEmails = await response.json();
                console.log(`Emails de phishing ${lang} charg√©s:`, phishingEmails);
            } catch (error) {
                console.error(`Erreur lors du chargement des emails de phishing ${lang}:`, error);
                phishingEmails = {}; // Fallback vers objet vide
            }
        }

        loadTranslations('en').then(() => {
            applyTranslations();
            generateTOSContent();
        });

        // Fonction pour g√©n√©rer dynamiquement le contenu des CGU
        function generateTOSContent() {
            const tosContent = document.getElementById('tosContent');
            if (!tosContent || !translations?.conditions?.content) {
                console.warn('Impossible de g√©n√©rer les CGU : conteneur ou traductions manquants');
                return;
            }

            const content = translations.conditions.content;
            let html = '';

            // G√©n√©rer chaque section
            Object.keys(content).forEach(sectionKey => {
                const section = content[sectionKey];

                // Ajouter le titre de la section
                html += `<h3>${section.title}</h3>`;

                // Ajouter les paragraphes
                if (section.paragraphs) {
                    section.paragraphs.forEach(paragraph => {
                        html += `<p>${paragraph}</p>`;
                    });
                }

                // Gestion sp√©ciale pour la section "usage" avec intro et restrictions
                if (section.intro) {
                    html += `<p>${section.intro}</p>`;
                }

                if (section.restrictions) {
                    html += '<ul>';
                    section.restrictions.forEach(restriction => {
                        html += `<li>${restriction}</li>`;
                    });
                    html += '</ul>';
                }

                // Gestion sp√©ciale pour la section "privacy" avec clause importante
                if (section.important_clause) {
                    html += `<div class="important-clause">${section.important_clause}</div>`;
                }

                if (section.easter_egg) {
                    html += `<h6>${section.easter_egg}</h6>`;
                }

                // Ajouter un espace entre les sections
                html += '<br>';
            });

            tosContent.innerHTML = html;
            console.log('CGU g√©n√©r√©es dynamiquement √† partir des traductions');
        }

        function getTranslation(key) {
            const keys = key.split('.');
            let value = translations;

            for (const k of keys) {
                value = value?.[k];
                if (value === undefined) break;
            }

            return value || key; // Retourne la cl√© si traduction non trouv√©e
        }

        // Fonction pour appliquer les traductions √† tous les √©l√©ments avec l'attribut 'traduction'
        function processMarkdown(text) {
            if (!text || typeof text !== 'string') return text;

            return text
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')  // **gras**
                .replace(/\*(.*?)\*/g, '<em>$1</em>')             // *italique*
                .replace(/`(.*?)`/g, '<code>$1</code>');          // `code`
        }

        function applyTranslations() {
            // Traductions pour le contenu textuel
            const elementsToTranslate = document.querySelectorAll('[traduction]');
            elementsToTranslate.forEach(element => {
                const translationKey = element.getAttribute('traduction');
                const translatedText = getTranslation(translationKey);

                if (translatedText && translatedText !== translationKey) {
                    const processedText = processMarkdown(translatedText);
                    if (processedText.includes('<')) {
                        element.innerHTML = processedText;
                    } else {
                        element.textContent = translatedText;
                    }
                }
            });

            // Traductions pour les placeholders
            const placeholdersToTranslate = document.querySelectorAll('[placeholder-traduction]');
            placeholdersToTranslate.forEach(element => {
                const translationKey = element.getAttribute('placeholder-traduction');
                const translatedText = getTranslation(translationKey);

                if (translatedText && translatedText !== translationKey) {
                    element.placeholder = translatedText;
                }
            });

            console.log(`${elementsToTranslate.length} √©l√©ments traduits + ${placeholdersToTranslate.length} placeholders traduits`);
        }

        function selectLanguage(lang) {
            // Sauvegarder le choix en localStorage
            localStorage.setItem('workshop-language', lang);

            // Mettre √† jour l'interface visuelle
            document.querySelectorAll('.language-flag').forEach(flag => {
                flag.classList.remove('selected');
            });

            // Marquer le drapeau s√©lectionn√©
            const selectedFlag = document.querySelector(`.flag-${lang}`);
            if (selectedFlag) {
                selectedFlag.classList.add('selected');
            }

            console.log(`Langue s√©lectionn√©e : ${lang}`);

            // Charger les traductions pour cette langue et appliquer
            loadTranslations(lang).then(() => {
                applyTranslations();
                generateTOSContent();
            });

            // Puis d√©verrouiller le workshop
            unlockWorkshop();
        }

        // Initialiser la langue au chargement
        function initializeLanguage() {
            const savedLang = localStorage.getItem('workshop-language') || 'fr';
            selectLanguage(savedLang);
        }

        class CarouselWorkshop {
            constructor() {
                this.currentIndex = 0;
                this.items = document.querySelectorAll('.carousel-item');
                this.indicators = document.querySelectorAll('.indicator');
                this.totalItems = this.items.length;
                
                // Syst√®me de tracking pour Fantasy Quest unlock
                this.visitedActivities = new Array(9).fill(false); // [0-8] activities
                this.fantasyQuestUnlocked = false;
                this.fantasyQuestPlayed = false; // Tracking si Fantasy Quest a √©t√© jou√©
                this.webcamEasterEggActivated = false; // Tracking de l'easter egg webcam

                // Syst√®me de timers pour validation vid√©os (1 min minimum)
                this.videoTimers = {}; // {activityIndex: {startTime, timeoutId}}
                this.videosWatched = new Set(); // Activit√©s vid√©o valid√©es

                // Timer p√©riodique pour v√©rifier le d√©bloquage Fantasy Quest
                this.unlockCheckInterval = setInterval(() => {
                    if (!this.fantasyQuestUnlocked) {
                        this.checkFantasyQuestUnlock();
                    }
                }, 5000); // V√©rification toutes les 5 secondes

                this.init();
            }

            init() {
                // Boutons de navigation
                document.getElementById('prevBtn').addEventListener('click', () => this.prev());
                document.getElementById('nextBtn').addEventListener('click', () => this.next());
                
                // Indicateurs
                this.indicators.forEach((indicator, index) => {
                    indicator.addEventListener('click', () => this.goTo(index));
                });

                // Navigation au clavier
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'ArrowLeft') this.prev();
                    if (e.key === 'ArrowRight') this.next();
                });

                // Clic sur les √©l√©ments pour navigation
                this.items.forEach((item, index) => {
                    item.addEventListener('click', (e) => {
                        if (!item.classList.contains('active')) {
                            this.goTo(index);
                        }
                    });
                });

                // Gestion des boutons de jeu
                document.querySelectorAll('.play-btn').forEach((btn, index) => {
                    btn.addEventListener('click', (e) => {
                        e.stopPropagation(); // Emp√™cher la navigation du carrousel
                        const gameType = this.items[index].getAttribute('data-game');
                        this.startActivity(gameType);
                    });
                });
            }

            updateCarousel() {
                this.items.forEach((item, index) => {
                    // Supprimer toutes les classes d'√©tat
                    item.classList.remove('active', 'prev', 'next', 'hidden');
                    
                    if (index === this.currentIndex) {
                        item.classList.add('active');
                    } else if (index === this.getPrevIndex()) {
                        item.classList.add('prev');
                    } else if (index === this.getNextIndex()) {
                        item.classList.add('next');
                    } else {
                        // Tous les autres √©l√©ments sont cach√©s
                        item.classList.add('hidden');
                    }
                });

                // Mettre √† jour les indicateurs
                this.indicators.forEach((indicator, index) => {
                    indicator.classList.toggle('active', index === this.currentIndex);
                });
            }

            getPrevIndex() {
                return (this.currentIndex - 1 + this.totalItems) % this.totalItems;
            }

            getNextIndex() {
                return (this.currentIndex + 1) % this.totalItems;
            }

            prev() {
                this.currentIndex = this.getPrevIndex();
                this.updateCarousel();
            }

            next() {
                this.currentIndex = this.getNextIndex();
                this.updateCarousel();
            }

            goTo(index) {
                this.currentIndex = index;
                this.updateCarousel();
            }

            startActivity(gameType) {
                // V√©rifier si c'est Fantasy Quest et s'il est d√©bloqu√©
                if (gameType === 'fantasy-quest' && !this.fantasyQuestUnlocked) {
                    this.showFantasyQuestLocked();
                    return;
                }

                // Pour Quiz et Site Suspect : marquer comme visit√© √† l'ouverture (syst√®me actuel)
                if (['quizz', 'site-suspect'].includes(gameType)) {
                    this.markActivityVisited(this.currentIndex);
                }
                
                // URLs des jeux externes
                const gameUrls = {
                    "fantasy-quest": getTranslation("carousel.fantasy.link"),
                    "quizz": getTranslation("carousel.quiz.link")
                };

                if (gameUrls[gameType]) {
                    // Marquer Fantasy Quest comme jou√©
                    if (gameType === 'fantasy-quest') {
                        this.fantasyQuestPlayed = true;
                        console.log('üè∞ Fantasy Quest played!');
                        this.checkCeremonyUnlock();
                    }
                    
                    // Ouvrir jeu externe
                    window.open(gameUrls[gameType], '_blank', 'noopener');
                } else {
                    // Ouvrir modal int√©gr√©e
                    this.openModal(gameType);
                }
            }

            openModal(gameType) {
                switch(gameType) {
                    case 'password-fortress':
                        document.getElementById('passwordOverlay').style.display = 'flex';
                        initPasswordGame();
                        break;
                    case 'email-phishing':
                        document.getElementById('emailOverlay').style.display = 'flex';
                        generateNewEmail();
                        break;
                    case 'wifi-trap':
                        document.getElementById('wifiOverlay').style.display = 'flex';
                        generateNewWifiScenario();
                        break;
                    case 'social-media-video':
                        document.getElementById('socialMediaOverlay').style.display = 'flex';
                        generateListFromArray('social-warning', 'carousel.social.tab.warning.element');
                        generateListFromArray('social-tips', 'carousel.social.tab.tips.element');
                        openSocialMediaVideo();
                        break;
                    case 'confidential':
                        document.getElementById('confidentialityOverlay').style.display = 'flex';
                        generateListFromArray('confidentiality-warning', 'carousel.confidentiality.tab.warning.element');
                        generateListFromArray('confidentiality-tips', 'carousel.confidentiality.tab.tips.element');
                        openConfidentialityVideo();
                        break;
                    case 'deepfake':
                        document.getElementById('deepfakeOverlay').style.display = 'flex';
                        generateListFromArray('deepfake-warning', 'carousel.deepfake.tab.warning.element');
                        generateListFromArray('deepfake-tips', 'carousel.deepfake.tab.tips.element');
                        openDeepfakeVideo();
                        break;
                    case 'questions-champion':
                        document.getElementById('questionsChampionOverlay').style.display = 'flex';
                        initQuestionsChampionGame();
                        break;
                    case 'site-suspect':
                        window.open(getTranslation('carousel.promo.link'), '_blank');
                        break;
                }
            }

            // === SYST√àME FANTASY QUEST UNLOCK ===
            markActivityVisited(index) {
                // Ne pas marquer Fantasy Quest lui-m√™me (index 7)
                if (index < 9 && !this.visitedActivities[index]) {
                    this.visitedActivities[index] = true;
                    console.log(`Activit√© ${index} marqu√©e comme visit√©e`);
                }
            }

            checkFantasyQuestUnlock() {
                // V√©rifier si toutes les activit√©s 0-8 ont √©t√© visit√©es
                // Pour les vid√©os, v√©rifier aussi le timer de 1 minute
                let allActivitiesCompleted = true;

                for (let i = 0; i < 9; i++) {
                    if (this.isVideoActivity(i)) {
                        // Pour les vid√©os, v√©rifier qu'elles ont √©t√© regard√©es 1 minute
                        const videoWatched = this.videosWatched.has(i);
                        // console.log(`Activit√© ${i} (vid√©o): ${videoWatched ? '‚úÖ' : '‚ùå'} regard√©e`);
                        if (!videoWatched) {
                            allActivitiesCompleted = false;
                            break;
                        }
                    } else {
                        // Pour les autres activit√©s, v√©rifier le syst√®me classique
                        const activityVisited = this.visitedActivities[i];
                        console.log(`Activit√© ${i}: ${activityVisited ? '‚úÖ' : '‚ùå'} visit√©e`);
                        if (!activityVisited) {
                            allActivitiesCompleted = false;
                            break;
                        }
                    }
                }

                // console.log(`üéØ Toutes activit√©s compl√©t√©es: ${allActivitiesCompleted}`);
                // console.log(`üîí Fantasy Quest d√©j√† d√©bloqu√©: ${this.fantasyQuestUnlocked}`);

                if (!this.fantasyQuestUnlocked && allActivitiesCompleted) {
                    console.log('üéâ D√âBLOQUAGE DE FANTASY QUEST !');
                    this.fantasyQuestUnlocked = true;
                    // Arr√™ter le timer de v√©rification p√©riodique
                    if (this.unlockCheckInterval) {
                        clearInterval(this.unlockCheckInterval);
                        console.log('‚èπÔ∏è Timer de v√©rification Fantasy Quest arr√™t√©');
                    }
                    this.unlockFantasyQuest();
                }
            }

            unlockFantasyQuest() {
                const fantasyQuestItem = document.querySelector('[data-index="9"]');
                if (fantasyQuestItem) {
                    // Animation d'unlock
                    fantasyQuestItem.style.transition = 'all 1s ease';
                    fantasyQuestItem.style.opacity = '1';
                    fantasyQuestItem.style.pointerEvents = 'auto';
                    fantasyQuestItem.classList.remove('fantasy-quest-locked');
                    
                    // Changer le texte et le bouton
                    const h2 = fantasyQuestItem.querySelector('h2');
                    const p = fantasyQuestItem.querySelector('p');
                    const button = fantasyQuestItem.querySelector('button');
                    
                    if (h2) h2.innerHTML = 'üè∞ Fantasy Quest ‚ú®';
                    if (p) p.innerHTML = getTranslation("carousel.fantasy.subtitle");
                    if (button) {
                        button.textContent = getTranslation("carousel.fantasy.button");
                        button.disabled = false;
                        button.style.background = '#4CAF50';
                        button.style.color = 'white';
                    }
                    
                    // Notification de succ√®s
                    this.showUnlockNotification();
                }
            }

            showFantasyQuestLocked() {
                const remaining = this.visitedActivities.slice(0, 7).filter(v => !v).length;
                alert(`üîí Fantasy Quest  ${getTranslation("carousel.fantasy.locked")}`);
            }

            showUnlockNotification() {
                // Cr√©er une notification temporaire
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background: linear-gradient(135deg, #4CAF50, #45a049);
                    color: white;
                    padding: 30px;
                    border-radius: 15px;
                    text-align: center;
                    z-index: 9999;
                    box-shadow: 0 8px 32px rgba(76, 175, 80, 0.4);
                    animation: unlockBounce 1s ease-out;
                    font-family: 'Segoe UI', sans-serif;
                `;
                
                notification.innerHTML = `
                    <div style="font-size: 48px; margin-bottom: 10px;">üéâ</div>
                    <h2 style="margin: 10px 0; color: white;">FANTASY QUEST D√âBLOQU√âE !</h2>
                    <p style="margin: 5px 0; font-size: 18px;">Toutes les activit√©s compl√©t√©es !</p>
                    <p style="margin: 5px 0; font-size: 16px; opacity: 0.9;">La qu√™te l√©gendaire vous attend...</p>
                `;
                
                // Ajouter l'animation CSS si elle n'existe pas
                if (!document.querySelector('#unlock-animation-style')) {
                    const style = document.createElement('style');
                    style.id = 'unlock-animation-style';
                    style.textContent = `
                        @keyframes unlockBounce {
                            0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
                            50% { transform: translate(-50%, -50%) scale(1.1); }
                            100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
                        }
                    `;
                    document.head.appendChild(style);
                }
                
                document.body.appendChild(notification);
                
                // Supprimer apr√®s 4 secondes avec fade out
                setTimeout(() => {
                    notification.style.transition = 'opacity 0.5s ease';
                    notification.style.opacity = '0';
                    setTimeout(() => notification.remove(), 500);
                }, 4000);
            }

            // === SYST√àME TIMER VID√âOS ===
            startVideoTimer(activityIndex) {
                // Nettoyer timer existant si pr√©sent
                this.stopVideoTimer(activityIndex);

                const startTime = Date.now();
                const timeoutDuration = activityIndex === 0 ? 35000 : 60000; // 35s pour confidentialit√©, 1min pour autres
                const timeoutId = setTimeout(() => {
                    this.videosWatched.add(activityIndex);
                    this.markActivityVisited(activityIndex); // Marquer aussi dans le syst√®me classique
                    console.log(`‚úÖ Vid√©o ${activityIndex} valid√©e apr√®s ${activityIndex === 0 ? '35 secondes' : '1 minute'}`);
                    this.checkFantasyQuestUnlock();
                }, timeoutDuration);

                this.videoTimers[activityIndex] = { startTime, timeoutId };
                console.log(`‚è±Ô∏è Timer vid√©o d√©marr√© pour activit√© ${activityIndex}`);
            }

            stopVideoTimer(activityIndex) {
                if (this.videoTimers[activityIndex]) {
                    clearTimeout(this.videoTimers[activityIndex].timeoutId);
                    delete this.videoTimers[activityIndex];
                    console.log(`‚èπÔ∏è Timer vid√©o arr√™t√© pour activit√© ${activityIndex}`);
                }
            }

            isVideoActivity(activityIndex) {
                // Activit√©s vid√©o : Confidentialit√© (0), Deepfake (1), R√©seaux Sociaux (5)
                return [0, 1, 5].includes(activityIndex);
            }

            checkCeremonyUnlock() {
                // V√©rifier si Fantasy Quest a √©t√© jou√© ET l'easter egg webcam activ√©
                if (this.fantasyQuestPlayed && this.webcamEasterEggActivated) {
                    console.log('üéÜ All conditions met! Opening ceremony...');
                    
                    // Afficher message de f√©licitations avec bouton vers la c√©r√©monie
                    const congratsDiv = document.createElement('div');
                    congratsDiv.style.cssText = `
                        position: fixed;
                        top: 50%;
                        left: 50%;
                        transform: translate(-50%, -50%);
                        background: linear-gradient(45deg, #FFD700, #FFA500);
                        color: #2C3E50;
                        padding: 30px;
                        border-radius: 20px;
                        text-align: center;
                        z-index: 10000;
                        box-shadow: 0 0 50px rgba(255, 215, 0, 0.8);
                        font-family: Georgia, serif;
                        font-weight: bold;
                        max-width: 500px;
                        animation: ceremonyUnlock 2s ease-out;
                    `;
                    congratsDiv.innerHTML = `
                        <h2 style="margin: 0 0 15px 0; font-size: 2rem;">üéÜ F√âLICITATIONS ! üéÜ</h2>
                        <p style="margin: 0 0 15px 0; font-size: 1.2rem;">
                            Vous avez termin√© toutes les qu√™tes et d√©couvert les secrets cach√©s !
                        </p>
                        <p style="margin: 0 0 20px 0; font-size: 1rem;">
                            Vous pouvez maintenant assister √† la c√©r√©monie de remise des dipl√¥mes ! ‚ú®
                        </p>
                        <button onclick="window.open(getTranslation('ceremony.link'), '_blank')" style="
                            background: linear-gradient(45deg, #4CAF50, #45a049);
                            color: white;
                            border: none;
                            padding: 12px 24px;
                            border-radius: 25px;
                            font-size: 1.1rem;
                            font-weight: bold;
                            cursor: pointer;
                            transition: all 0.3s ease;
                            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);
                        " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                            üéì Aller √† la c√©r√©monie
                        </button>
                        <div style="margin-top: 15px;">
                            <button onclick="this.parentElement.parentElement.remove(); window.carouselWorkshop.showPersistentCeremonyButton();" style="
                                background: transparent;
                                color: #2C3E50;
                                border: 2px solid #2C3E50;
                                padding: 8px 16px;
                                border-radius: 20px;
                                font-size: 0.9rem;
                                cursor: pointer;
                                transition: all 0.3s ease;
                            " onmouseover="this.style.background='rgba(44, 62, 80, 0.1)'" onmouseout="this.style.background='transparent'">
                                Fermer
                            </button>
                        </div>
                    `;
                    
                    document.body.appendChild(congratsDiv);
                    
                    // Ajouter l'animation CSS
                    if (!document.querySelector('#ceremony-unlock-animation')) {
                        const style = document.createElement('style');
                        style.id = 'ceremony-unlock-animation';
                        style.textContent = `
                            @keyframes ceremonyUnlock {
                                0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
                                50% { transform: translate(-50%, -50%) scale(1.1); opacity: 1; }
                                100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
                            }
                        `;
                        document.head.appendChild(style);
                    }
                }
            }

            showPersistentCeremonyButton() {
                // V√©rifier si le bouton existe d√©j√†
                if (document.getElementById('persistent-ceremony-btn')) {
                    return;
                }
                
                // Cr√©er le bouton persistant en haut √† droite
                const persistentBtn = document.createElement('button');
                persistentBtn.id = 'persistent-ceremony-btn';
                persistentBtn.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: linear-gradient(45deg, #4CAF50, #45a049);
                    color: white;
                    border: none;
                    padding: 12px 20px;
                    border-radius: 25px;
                    font-size: 1rem;
                    font-weight: bold;
                    cursor: pointer;
                    z-index: 1000;
                    box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);
                    transition: all 0.3s ease;
                    animation: ceremonyButtonBounce 2s infinite;
                `;
                persistentBtn.innerHTML = 'üéì C√©r√©monie';
                
                // Event listeners
                persistentBtn.addEventListener('click', () => {
                    window.open(getTranslation('ceremony.link'), '_blank');
                });
                
                persistentBtn.addEventListener('mouseover', () => {
                    persistentBtn.style.transform = 'scale(1.1)';
                    persistentBtn.style.boxShadow = '0 6px 20px rgba(76, 175, 80, 0.6)';
                });
                
                persistentBtn.addEventListener('mouseout', () => {
                    persistentBtn.style.transform = 'scale(1)';
                    persistentBtn.style.boxShadow = '0 4px 15px rgba(76, 175, 80, 0.4)';
                });
                
                document.body.appendChild(persistentBtn);
                
                // Ajouter l'animation CSS si elle n'existe pas
                if (!document.querySelector('#ceremony-button-animation')) {
                    const style = document.createElement('style');
                    style.id = 'ceremony-button-animation';
                    style.textContent = `
                        @keyframes ceremonyButtonBounce {
                            0%, 100% { transform: translateY(0px); }
                            50% { transform: translateY(-5px); }
                        }
                        
                        #persistent-ceremony-btn:hover {
                            animation: none !important;
                        }
                    `;
                    document.head.appendChild(style);
                }
                
                console.log('üéì Persistent ceremony button added');
            }
        }

        // === FONCTIONS POUR LES MODALS ===

        // === FONCTIONS POUR PASSWORD FORTRESS ===
        let compromisedPasswords = new Set();
        let passwordsLoaded = false;

        async function loadCompromisedPasswords() {
            if (passwordsLoaded) return;
            
            try {
                const loadingDiv = document.createElement('div');
                loadingDiv.innerHTML = 'üîç Chargement de la base de donn√©es des mots de passe compromis...';
                loadingDiv.className = 'loading-passwords';
                loadingDiv.id = 'passwordLoader';
                
                document.querySelector('.password-game').appendChild(loadingDiv);
                
                // Charger les deux dictionnaires en parall√®le
                const [rockyou, topPasswords] = await Promise.all([
                    fetch('https://raw.githubusercontent.com/KamelZar/CyberQuestKids/main/html/rockyou-75.txt').then(r => r.text()).catch(() => ''),
                    fetch('https://raw.githubusercontent.com/KamelZar/CyberQuestKids/main/html/10-million.txt').then(r => r.text()).catch(() => '')
                ]);
                
                // Traiter rockyou-75.txt
                rockyou.split('\n').forEach(pwd => {
                    if (pwd.trim()) compromisedPasswords.add(pwd.trim().toLowerCase());
                });
                
                // Traiter 10-million-password-list
                topPasswords.split('\n').forEach(pwd => {
                    if (pwd.trim()) compromisedPasswords.add(pwd.trim().toLowerCase());
                });
                
                passwordsLoaded = true;
                
                // Supprimer le message de chargement
                const loader = document.getElementById('passwordLoader');
                if (loader) loader.remove();
                
                console.log(`Base de donn√©es charg√©e: ${compromisedPasswords.size} mots de passe compromis`);
                
            } catch (error) {
                console.warn('Erreur lors du chargement des dictionnaires:', error);
                const loader = document.getElementById('passwordLoader');
                if (loader) {
                    loader.innerHTML = '‚ö†Ô∏è Impossible de charger la base de donn√©es des mots de passe compromis.';
                    setTimeout(() => loader.remove(), 3000);
                }
            }
        }

        function initPasswordGame() {
            document.getElementById('passwordInput').value = '';
            updatePasswordStrength('');
            loadCompromisedPasswords(); // Charger les dictionnaires au d√©marrage
        }

        function closePasswordGame() {
            document.getElementById('passwordOverlay').style.display = 'none';
            // Marquer comme visit√© seulement si mot de passe valide
            if (isPasswordValid()) {
                window.carouselWorkshop.markActivityVisited(2); // Password Fortress = index 2
            }
        }

        function isPasswordValid() {
            const password = document.getElementById('passwordInput').value;
            const requirements = {
                length: password.length >= 8,
                lower: /[a-z]/.test(password),
                upper: /[A-Z]/.test(password),
                number: /\d/.test(password),
                special: /[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(password),
                noCommon: !isCommonPassword(password)
            };

            // V√©rifier que tous les crit√®res sont remplis
            return Object.values(requirements).every(req => req === true);
        }

        function updatePasswordStrength(password) {
            const requirements = {
                length: password.length >= 8,
                lower: /[a-z]/.test(password),
                upper: /[A-Z]/.test(password),
                number: /\d/.test(password),
                special: /[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(password),
                noCommon: !isCommonPassword(password)
            };

            // Mettre √† jour les indicateurs visuels
            Object.keys(requirements).forEach(req => {
                let elementId = `req-${req}`;
                if (req === 'noCommon') {
                    elementId = 'req-no-common';
                }
                const element = document.getElementById(elementId);
                if (element) {
                    element.className = `requirement ${requirements[req] ? 'met' : 'unmet'}`;
                }
            });

            // V√©rifier si le mot de passe est compromis
            const compromiseResult = checkCompromisedPassword(password);
            
            // Afficher un avertissement si compromis
            if (compromiseResult.isCompromised) {
                showCompromiseWarning(compromiseResult);
            } else {
                removeCompromiseWarning();
            }

            // Calculer la force globale
            const metRequirements = Object.values(requirements).filter(Boolean).length;
            const strengthFill = document.getElementById('strengthFill');
            const crackTime = document.getElementById('crackTime');

            let strengthClass = '';
            let timeText = '';
            let timeColor = '';

            if (password.length == 0) {
                strengthClass = '';
                timeText = 'Temps de craquage : Instantan√© ‚ö°';
                timeColor = '#999';
            } else if (compromiseResult.isCompromised) {
                // Ajuster la force selon le risque intelligent
                if (compromiseResult.type === 'intelligent' && compromiseResult.riskLevel === 'low') {
                    strengthClass = 'strength-good';
                    timeColor = '#f1c40f';
                } else if (compromiseResult.type === 'intelligent' && compromiseResult.riskLevel === 'medium') {
                    strengthClass = 'strength-medium';
                    timeColor = '#ff8000';
                } else {
                    strengthClass = 'strength-weak';
                    timeColor = '#ff4655';
                }
                timeText = getCompromiseCrackTime(compromiseResult, password.length);
            } else if (metRequirements <= 3) {
                strengthClass = 'strength-medium';
                timeText = calculateCrackTime(password, 'medium');
                timeColor = '#ff8000';
            } else if (metRequirements <= 4) {
                strengthClass = 'strength-good';
                timeText = calculateCrackTime(password, 'good');
                timeColor = '#f1c40f';
            } else {
                strengthClass = 'strength-strong';
                timeText = calculateCrackTime(password, 'strong');
                timeColor = '#27ae60';
            }

            strengthFill.className = `strength-fill ${strengthClass}`;
            crackTime.textContent = timeText;
            crackTime.style.color = timeColor;
            crackTime.style.backgroundColor = timeColor + '20';
        }

        function checkCompromisedPassword(password) {
            if (!passwordsLoaded || password.length < 3) {
                return { isCompromised: false, type: 'none', details: '', riskLevel: 'none' };
            }

            const lowerPassword = password.toLowerCase();
            
            // V√©rification exacte - toujours critique
            if (compromisedPasswords.has(lowerPassword)) {
                return {
                    isCompromised: true,
                    type: 'exact',
                    details: 'Ce mot de passe exact figure dans les bases de donn√©es de mots de passe pirat√©s',
                    riskLevel: 'critical',
                    unknownComplexity: 0
                };
            }

            // Analyse intelligente des sous-cha√Ænes
            const analysis = analyzePasswordSegments(lowerPassword);
            
            if (analysis.compromisedSegments.length > 0) {
                const riskAssessment = calculateIntelligentRisk(password, analysis);
                return {
                    isCompromised: true,
                    type: 'intelligent',
                    details: `Contient ${analysis.compromisedSegments.length} segment(s) connu(s) : "${analysis.compromisedSegments.join('", "')}"`,
                    riskLevel: riskAssessment.level,
                    unknownComplexity: riskAssessment.unknownComplexity,
                    compromisedLength: analysis.compromisedLength,
                    unknownLength: analysis.unknownLength
                };
            }

            return { isCompromised: false, type: 'none', details: '', riskLevel: 'none' };
        }

        function analyzePasswordSegments(lowerPassword) {
            const compromisedSegments = [];
            let compromisedPositions = new Set();
            
            // Trouver tous les segments compromis
            for (let compromisedPwd of compromisedPasswords) {
                if (compromisedPwd.length >= 4) {
                    let startIndex = 0;
                    while ((startIndex = lowerPassword.indexOf(compromisedPwd, startIndex)) !== -1) {
                        compromisedSegments.push(compromisedPwd);
                        // Marquer les positions comme compromises
                        for (let i = startIndex; i < startIndex + compromisedPwd.length; i++) {
                            compromisedPositions.add(i);
                        }
                        startIndex++;
                    }
                }
            }
            
            const compromisedLength = compromisedPositions.size;
            const unknownLength = lowerPassword.length - compromisedLength;
            
            return {
                compromisedSegments: [...new Set(compromisedSegments)], // Supprimer les doublons
                compromisedLength,
                unknownLength,
                totalLength: lowerPassword.length
            };
        }

        function calculateIntelligentRisk(password, analysis) {
            const { unknownLength, compromisedLength } = analysis;
            
            // Si trop de caract√®res compromis vs inconnus
            if (compromisedLength >= password.length * 0.8) {
                return { level: 'high', unknownComplexity: 'very-low' };
            }
            
            // Calculer la complexit√© des caract√®res inconnus
            const complexityScore = calculateUnknownComplexity(password, analysis);
            
            // D√©terminer le niveau de risque
            if (unknownLength >= 12 && complexityScore >= 3) {
                return { level: 'low', unknownComplexity: 'high' };
            } else if (unknownLength >= 8 && complexityScore >= 2) {
                return { level: 'medium', unknownComplexity: 'medium' };
            } else {
                return { level: 'high', unknownComplexity: 'low' };
            }
        }

        function calculateUnknownComplexity(password, analysis) {
            // Analyser seulement les caract√®res non-compromis
            let complexityScore = 0;
            
            if (/[a-z]/.test(password)) complexityScore++;
            if (/[A-Z]/.test(password)) complexityScore++;
            if (/\d/.test(password)) complexityScore++;
            if (/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?√†√¢√§√©√®√™√´√Ø√Æ√¥√∂√π√ª√º√ø√ß]/.test(password)) complexityScore++;
            
            return complexityScore;
        }

        function showCompromiseWarning(result) {
            // Supprimer l'avertissement existant
            removeCompromiseWarning();
            
            const warningDiv = document.createElement('div');
            warningDiv.id = 'compromiseWarning';
            warningDiv.className = 'requirement unmet';
            warningDiv.style.backgroundColor = 'rgba(255, 70, 85, 0.3)';
            warningDiv.style.border = '2px solid #ff4655';
            warningDiv.style.fontWeight = 'bold';
            
            // Messages p√©dagogiques selon le type de compromission
            let message = '';
            let explanation = '';
            
            switch(result.type) {
                case 'exact':
                    message = 'üö® DANGER CRITIQUE : Ce mot de passe exact figure dans les bases de donn√©es de mots de passe pirat√©s';
                    explanation = '<div style="margin-top: 8px; font-size: 0.9em; font-weight: normal;">Les hackers le testent en premier - changez-le imm√©diatement !</div>';
                    break;
                    
                case 'intelligent':
                    const riskEmoji = result.riskLevel === 'low' ? 'üí°' : 
                                     result.riskLevel === 'medium' ? '‚ö†Ô∏è' : 'üö®';
                    const riskText = result.riskLevel === 'low' ? 'ANALYSE INTELLIGENTE' : 
                                    result.riskLevel === 'medium' ? 'RISQUE MOD√âR√â' : 'RISQUE √âLEV√â';
                    
                    message = `${riskEmoji} ${riskText} : ${result.details}`;
                    
                    let explanationText = '';
                    if (result.riskLevel === 'low') {
                        explanationText = `Bien ! M√™me si des segments sont connus, vos ${result.unknownLength} caract√®res inconnus offrent une excellente protection.`;
                    } else if (result.riskLevel === 'medium') {
                        explanationText = `Attention : Les ${result.compromisedLength} caract√®res connus r√©duisent la s√©curit√©. Ajoutez plus de complexit√© aux ${result.unknownLength} caract√®res restants.`;
                    } else {
                        explanationText = `Danger : Trop de caract√®res connus (${result.compromisedLength}/${result.compromisedLength + result.unknownLength}). Les hackers peuvent exploiter ces segments.`;
                    }
                    
                    explanation = `<div style="margin-top: 8px; font-size: 0.9em; font-weight: normal;">${explanationText}</div>`;
                    break;
                    
                default:
                    message = `üö® ATTENTION: ${result.details}`;
                    explanation = '';
            }
            
            warningDiv.innerHTML = message + explanation;
            
            const strengthMeter = document.querySelector('.strength-meter');
            strengthMeter.parentNode.insertBefore(warningDiv, strengthMeter.nextSibling);
        }

        function removeCompromiseWarning() {
            const warning = document.getElementById('compromiseWarning');
            if (warning) warning.remove();
        }

        function calculateCrackTime(password, strength) {
            const length = password.length;
            let charset = 0;
            
            if (/[a-z]/.test(password)) charset += 26;
            if (/[A-Z]/.test(password)) charset += 26;
            if (/\d/.test(password)) charset += 10;
            if (/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(password)) charset += 32;
            
            const combinations = Math.pow(charset, length);
            const guessesPerSecond = 1000000000; // 1 milliard de tentatives/seconde
            const averageTime = combinations / (2 * guessesPerSecond);
            
            return `Temps de craquage : ${formatTime(averageTime)} ${getEmoji(strength)}`;
        }

        function formatTime(seconds) {
            if (seconds < 1) return 'Instantan√©';
            if (seconds < 60) return `${Math.round(seconds)} secondes`;
            if (seconds < 3600) return `${Math.round(seconds/60)} minutes`;
            if (seconds < 86400) return `${Math.round(seconds/3600)} heures`;
            if (seconds < 31536000) return `${Math.round(seconds/86400)} jours`;
            return `${Math.round(seconds/31536000)} ann√©es`;
        }

        function getEmoji(strength) {
            const emojis = { weak: '‚ö°', medium: '‚è∞', good: 'üõ°Ô∏è', strong: 'üè∞' };
            return emojis[strength] || '‚ö°';
        }

        function getCompromiseCrackTime(result, passwordLength) {
            if (result.type === 'exact') {
                return 'Temps de craquage : Instantan√© ‚ö° (mot de passe entier connu des hackers)';
            }
            
            if (result.type === 'intelligent') {
                const { riskLevel, unknownLength, compromisedLength } = result;
                
                switch(riskLevel) {
                    case 'low':
                        if (unknownLength >= 15) {
                            return `Temps de craquage : Plusieurs mill√©naires üè∞ (${unknownLength} caract√®res complexes inconnus)`;
                        } else {
                            return `Temps de craquage : Milliers d'ann√©es üõ°Ô∏è (${unknownLength} caract√®res complexes inconnus)`;
                        }
                        
                    case 'medium':
                        return `Temps de craquage : Quelques ann√©es √† si√®cles ‚è∞ (${unknownLength} caract√®res inconnus moyennement complexes)`;
                        
                    case 'high':
                        if (unknownLength <= 4) {
                            return `Temps de craquage : Quelques heures √† jours ‚ö° (seulement ${unknownLength} caract√®res inconnus)`;
                        } else {
                            return `Temps de craquage : Quelques jours √† semaines ‚ö° (${unknownLength} caract√®res inconnus peu complexes)`;
                        }
                        
                    default:
                        return 'Temps de craquage : Quelques jours ‚è∞ (segments connus d√©tect√©s)';
                }
            }
            
            // Fallback pour ancienne logique
            return 'Temps de craquage : Instantan√© ‚ö° (compromis)';
        }

        function isCommonPassword(password) {
            const common = ['password', '123456', 'password123', 'admin', 'qwerty', 'abc123', 'letmein', 'welcome', '123456789', 'password1'];
            return common.includes(password.toLowerCase());
        }

        // Ajouter l'√©couteur d'√©v√©nement pour le champ de saisie
        document.addEventListener('DOMContentLoaded', function() {
            const passwordInput = document.getElementById('passwordInput');
            if (passwordInput) {
                passwordInput.addEventListener('input', function() {
                    checkPasswordEasterEggs(this.value);
                    updatePasswordStrength(this.value);
                });
            }
        });

        // Easter Eggs Password Fortress
        function checkPasswordEasterEggs(password) {
            const lowerPassword = password.toLowerCase();
            
            if (lowerPassword === 'password123') {
                showPasswordEasterEgg('ü§¶‚Äç‚ôÇÔ∏è S√©rieusement ?', 'Ce mot de passe figure dans le TOP 3 des mots de passe les plus utilis√©s au monde ! Il peut √™tre cass√© en moins de 0,001 seconde. Fun fact: 4,6% des utilisateurs utilisent encore "password" comme mot de passe en 2024.');
            } else if (lowerPassword === 'qwerty' || lowerPassword === 'azerty') {
                showPasswordEasterEgg('‚å®Ô∏è Cr√©ativit√© = 0', 'Les suites de clavier comme QWERTY/AZERTY sont dans les 10 mots de passe les plus pirat√©s. Un hacker peut les deviner en 0,003 seconde. Pro tip: m√™me "qwerty123!" reste faible car c\'\'est pr√©visible.');
            } else if (lowerPassword === '123456') {
                showPasswordEasterEgg('ü•á Champion du Monde !', '123456 est LE mot de passe le plus utilis√© au monde depuis 10 ans ! Utilis√© par 23 millions de comptes pirat√©s. Temps de craquage: instantan√©. M√™me votre chat ferait mieux.');
            } else if (lowerPassword === 'admin' || lowerPassword === 'root') {
                showPasswordEasterEgg('üë®‚Äçüíª Hacker Detected', 'Ah, un connaisseur ! Ces mots de passe d\'\'admin sont les premiers test√©s lors d\'\'attaques par dictionnaire. En entreprise, 73% des violations commencent par des comptes admin compromis.');
            } else if (lowerPassword === 'matrix' || lowerPassword === 'neo') {
                showPasswordEasterEgg('üî¥ Pilule Rouge', 'Welcome to the Matrix ! M√™me Neo utilisait des mots de passe plus complexes. Dans le film, la vraie s√©curit√© venait de la cryptographie quantique, pas de "password1".');
            } else if (password.length >= 20 && /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]/.test(password)) {
                showPasswordEasterEgg('üõ°Ô∏è Cyber-Warrior !', 'Excellent ! Ce niveau de complexit√© vous prot√®ge contre 99,9% des attaques automatis√©es. Un mot de passe de 20+ caract√®res bien compos√© peut r√©sister des millions d\'\'ann√©es m√™me aux supercalculateurs.');
            }
        }

        function showPasswordEasterEgg(title, message) {
            // Utiliser le conteneur requirements au lieu de strength-meter
            const requirementsContainer = document.querySelector('.requirements');
            if (!requirementsContainer) {
                console.warn('Element requirements not found');
                return;
            }
            
            const easterEggDiv = document.createElement('div');
            easterEggDiv.className = 'password-easter-egg';
            easterEggDiv.style.cssText = `
                background: rgba(255, 70, 85, 0.1);
                border: 2px solid #ff4655;
                border-radius: 8px;
                padding: 15px;
                margin: 15px 0;
                animation: easterEggBounce 0.5s ease-out;
            `;
            easterEggDiv.innerHTML = `
                <h4 style="color: #ff4655; margin: 0 0 8px 0; font-size: 1.1rem;">${title}</h4>
                <p style="color: #ecf0f1; font-size: 0.9rem; line-height: 1.4; margin: 0;">${message}</p>
            `;
            
            // Supprimer l'ancien easter egg s'il existe
            const existingEasterEgg = document.querySelector('.password-easter-egg');
            if (existingEasterEgg) {
                existingEasterEgg.remove();
            }
            
            // Ajouter apr√®s le conteneur requirements
            requirementsContainer.parentNode.insertBefore(easterEggDiv, requirementsContainer.nextSibling);
            
            // Ajouter l'animation CSS si elle n'existe pas
            if (!document.querySelector('#easter-egg-animation-style')) {
                const style = document.createElement('style');
                style.id = 'easter-egg-animation-style';
                style.textContent = `
                    @keyframes easterEggBounce {
                        0% { transform: scale(0.8); opacity: 0; }
                        50% { transform: scale(1.05); }
                        100% { transform: scale(1); opacity: 1; }
                    }
                `;
                document.head.appendChild(style);
            }
            
            // L'enlever apr√®s 8 secondes avec fade out
            setTimeout(() => {
                if (easterEggDiv.parentNode) {
                    easterEggDiv.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
                    easterEggDiv.style.opacity = '0';
                    easterEggDiv.style.transform = 'scale(0.9)';
                    setTimeout(() => {
                        if (easterEggDiv.parentNode) {
                            easterEggDiv.remove();
                        }
                    }, 500);
                }
            }, 8000);
        }

        // Email Phishing
        function closeEmailGame() {
            document.getElementById('emailOverlay').style.display = 'none';
            // Marquer comme visit√© seulement si toutes les erreurs ont √©t√© trouv√©es
            if (window.currentEmail && window.foundErrors >= window.currentEmail.totalErrors) {
                window.carouselWorkshop.markActivityVisited(3); // Email Pi√®ge = index 3
            }
        }

        function generateListFromArray(containerId, translationKey) {
            const container = document.getElementById(containerId);
            const items = getTranslation(translationKey);
            if (Array.isArray(items)) {
                container.innerHTML = items.map(item =>
                `<li>${processMarkdown(item)}</li>`).join('');
            }
        }

        function generateMatrixDiv(containerId, translationKey) {
            const container = document.getElementById(containerId);
            const items = getTranslation(translationKey);
            if (Array.isArray(items)) {
                container.innerHTML = items.map(item =>
                `<div class="cyber-stat">${processMarkdown(item)}</div>`).join('');
            }
        }

        // Fonction pour construire le HTML de l'email depuis les donn√©es JSON
        function buildEmailHTML(email) {
            const icon = email.id === 'bank' ? 'üìß' : email.id === 'paypal' ? 'üí≥' : 'üì¶';

            // Construire les √©l√©ments du corps avec les erreurs cliquables
            let bodyHTML = '';
            email.body.forEach(paragraph => {
                bodyHTML += `<p>${paragraph}</p>`;
            });

            // Cr√©er le HTML complet avec les erreurs cliquables
            const errorMap = {};
            email.errors.forEach(error => {
                errorMap[error.selector] = error;
            });

            return `
                <div class="email-header">
                    <div>
                        <div>De: <span class="clickable-error" onclick="foundError('${errorMap.email.id}', '${errorMap.email.explanation.replace(/'/g, "\\'")}', '${errorMap.email.target}')">${email.from}</span></div>
                        <div>√Ä: vous@email.com</div>
                    </div>
                    <div>${icon}</div>
                </div>
                <div class="email-content">
                    <div class="email-subject">${email.subject}</div>
                    <p>${email.greeting}</p>
                    ${email.body.map((para, index) => {
                        // Identifier les erreurs dans le corps du texte
                        const bodyError = email.errors.find(e =>
                            (e.selector === 'subject-urgency' || e.selector === 'urgency' ||
                             e.selector === 'amount' || e.selector === 'limitation' ||
                             e.selector === 'order') && para.includes(e.target)
                        );
                        if (bodyError) {
                            const escapedTarget = bodyError.target.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                            return `<p>${para.replace(new RegExp(escapedTarget, 'g'),
                                `<span class="clickable-error" onclick="foundError('${bodyError.id}', '${bodyError.explanation.replace(/'/g, "\\'")}', '${bodyError.target}')">${bodyError.target}</span>`)}</p>`;
                        }
                        return `<p>${para}</p>`;
                    }).join('')}
                    <a href="#" class="suspicious-link clickable-error" onclick="foundError('${errorMap.button.id}', '${errorMap.button.explanation.replace(/'/g, "\\'")}', '${errorMap.button.target}')">${email.buttonText}</a>
                    <p><span class="clickable-error" onclick="foundError('${errorMap.threat.id}', '${errorMap.threat.explanation.replace(/'/g, "\\'")}', '${errorMap.threat.target}')">${email.threat}</span></p>
                    <p>${email.signature.closing}<br><span class="clickable-error" onclick="foundError('${errorMap.signature.id}', '${errorMap.signature.explanation.replace(/'/g, "\\'")}', '${errorMap.signature.target}')">${email.signature.name}</span></p>
                </div>
            `;
        }

        function generateNewEmail() {
            // Utiliser les emails depuis phishingEmails
            const emails = phishingEmails.emails || [];
            if (emails.length === 0) {
                console.error('Aucun email de phishing charg√©!');
                return;
            }

            const randomEmail = emails[Math.floor(Math.random() * emails.length)];

            // Initialiser le jeu
            window.currentEmail = randomEmail;
            window.currentEmail.totalErrors = randomEmail.errors.length;
            window.foundErrors = 0;
            window.foundErrorIds = new Set();

            // Construire le HTML de l'email depuis le JSON
            document.getElementById('emailContainer').innerHTML = buildEmailHTML(randomEmail);

            const gameTitle = getTranslation('carousel.spam.tab.game.title').replace('{count}', randomEmail.errors.length);
            const gameInstructions = getTranslation('carousel.spam.tab.game.instructions').replace('{count}', randomEmail.errors.length);

            document.getElementById('analysisPanel').innerHTML = `
                <div class="game-counter">
                    ${gameTitle}
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%"></div>
                    </div>
                    <div>${getTranslation('carousel.spam.tab.game.errors_found')} <span id="errorCount">0</span> / ${randomEmail.errors.length}</div>
                </div>
                <h3>üîç ${getTranslation('carousel.spam.tab.analyse')} :</h3>
                <p>${gameInstructions}</p>
                <div style="text-align: center; margin: 15px 0;">
                    <button class="btn" onclick="window.open('https://phishingquiz.withgoogle.com', '_blank')" style="margin-right: 10px;">${getTranslation('carousel.spam.tab.more')}</button>
                    <button class="hint-button" onclick="showHint()" style="margin-right: 10px;">${getTranslation('carousel.spam.tab.game.hint_button')}</button>
                    <button class="solution-button" onclick="showAllSolutions()">${getTranslation('carousel.spam.tab.game.solution_button')}</button>
                </div>
                <div id="hintSection" style="margin-top: 20px;"></div>
                <div id="errorsList" style="margin-top: 15px;"></div>
            `;
        }

        // Fonctions pour le jeu Email Pi√®ge
        function foundError(errorId, explanation) {
            if (!window.foundErrorIds) window.foundErrorIds = new Set();
            if (!window.foundErrors) window.foundErrors = 0;

            if (!window.foundErrorIds.has(errorId)) {
                window.foundErrorIds.add(errorId);
                window.foundErrors++;

                // Marquer visuellement l'erreur trouv√©e
                event.target.classList.add('found');

                // Mettre √† jour le compteur
                const errorCount = document.getElementById('errorCount');
                if (errorCount) {
                    errorCount.textContent = window.foundErrors;

                    // Mettre √† jour la barre de progression
                    const progressBar = document.querySelector('.progress-fill');
                    if (progressBar && window.currentEmail) {
                        const percentage = (window.foundErrors / window.currentEmail.totalErrors) * 100;
                        progressBar.style.width = `${percentage}%`;
                    }
                }

                // Ajouter l'explication d√©taill√©e
                const errorsList = document.getElementById('errorsList');
                if (errorsList) {
                    const errorDiv = document.createElement('div');
                    errorDiv.className = 'explanation-box';

                    const errorDetectedMsg = getTranslation('carousel.spam.tab.game.error_detected').replace('{number}', window.foundErrors);
                    const problemIdentified = getTranslation('carousel.spam.tab.game.problem_identified') || 'Probl√®me identifi√© :';
                    const whySuspicious = getTranslation('carousel.spam.tab.game.why_suspicious') || 'Pourquoi c\'est suspect :';

                    errorDiv.innerHTML = `
                        <div class="explanation-title">${errorDetectedMsg}</div>
                        <div class="explanation-text">
                            <strong>${problemIdentified}</strong> ${explanation}
                            <br><br>
                            <strong>${whySuspicious}</strong> ${getDetailedExplanation(errorId)}
                        </div>
                    `;
                    errorsList.appendChild(errorDiv);

                    // Scroller vers la nouvelle explication
                    errorDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                }

                // V√©rifier si toutes les erreurs ont √©t√© trouv√©es
                if (window.currentEmail && window.foundErrors >= window.currentEmail.totalErrors) {
                    setTimeout(() => {
                        const errorsList = document.getElementById('errorsList');
                        if (errorsList) {
                            const victoryTitle = getTranslation('carousel.spam.tab.game.victory_title') || 'üèÜ Bravo ! Vous √™tes maintenant un expert anti-phishing !';
                            const victoryAdvice = getTranslation('carousel.spam.tab.game.victory_advice') || 'En cas de doute, contactez directement l\'organisation par leur site officiel ou par t√©l√©phone. Ne jamais cliquer sur les liens suspects !';
                            const newEmailBtn = getTranslation('carousel.spam.tab.game.new_email_button') || 'üîÑ Nouvel email';
                            const moreTrainingBtn = getTranslation('carousel.spam.tab.game.more_training_button') || 'üéØ Plus d\'entra√Ænement';

                            errorsList.innerHTML += `
                                <div class="victory-message">
                                    <h3>${victoryTitle}</h3>
                                    <p><strong>${getTranslation('carousel.spam.tab.game.expert_advice') || 'Conseil d\'expert :'}</strong> ${victoryAdvice}</p>
                                    <div style="margin-top: 15px;">
                                        <button class="btn" onclick="generateNewEmail()" style="margin-right: 10px;">${newEmailBtn}</button>
                                        <button class="btn" onclick="window.open('https://phishingquiz.withgoogle.com', '_blank')">${moreTrainingBtn}</button>
                                    </div>
                                </div>
                            `;
                        }
                    }, 1500);
                }
            }
        }

        function getDetailedExplanation(errorId) {
            if (!phishingEmails.explanations || !phishingEmails.explanations[errorId]) {
                return getTranslation('carousel.spam.tab.game.default_explanation') || 'Cet √©l√©ment pr√©sente des caract√©ristiques typiques du phishing.';
            }

            const exp = phishingEmails.explanations[errorId];
            const whyDangerous = getTranslation('carousel.spam.tab.game.why_dangerous') || 'üö® Pourquoi c\'est dangereux :';
            const howToDetect = getTranslation('carousel.spam.tab.game.how_to_detect') || 'üí° Comment d√©tecter :';

            return `
                <div class="why-dangerous">
                    <strong>${whyDangerous}</strong><br>
                    ${exp.danger}
                </div>
                <div class="detection-tip">
                    <strong>${howToDetect}</strong><br>
                    ${exp.detection}
                </div>
            `;
        }

        function showHint() {
            if (!window.currentEmail) return;
            
            const hintSection = document.getElementById('hintSection');
            if (hintSection) {
                hintSection.innerHTML = `
                    <div class="explanation-box" style="border-left-color: #f39c12;">
                        <div class="explanation-title" style="color: #f39c12;">üí° Indice</div>
                        <div class="explanation-text">
                            Cherchez les signes suivants dans l'email :
                            <ul>
                                <li>üîç Fautes d'orthographe dans l'adresse email</li>
                                <li>‚ö†Ô∏è Urgence artificielle ("24h", "imm√©diatement")</li>
                                <li>üîó Liens suspects ou g√©n√©riques</li>
                                <li>üí∞ Menaces financi√®res</li>
                                <li>üìù Signatures vagues ou g√©n√©riques</li>
                            </ul>
                        </div>
                    </div>
                `;
            }
        }

        function showAllSolutions() {
            const hintSection = document.getElementById('hintSection');
            if (hintSection) {
                hintSection.innerHTML = `
                    <div class="explanation-box" style="border-left-color: #e74c3c;">
                        <div class="explanation-title" style="color: #e74c3c;">üîç Toutes les solutions r√©v√©l√©es</div>
                        <div class="explanation-text">
                            <p>Cliquez sur les √©l√©ments surlign√©s dans l'email pour d√©couvrir pourquoi ils sont suspects !</p>
                            <p><strong>Astuce :</strong> Dans un vrai email de phishing, JAMAIS cliquer sur les liens. Contactez directement l'organisation.</p>
                        </div>
                    </div>
                `;
            }
        }

        // WiFi Pi√®ge
        function closeWifiGame() {
            document.getElementById('wifiOverlay').style.display = 'none';
            // Marquer comme visit√© seulement si un WiFi a √©t√© s√©lectionn√©
            if (isWifiSelected()) {
                window.carouselWorkshop.markActivityVisited(4); // WiFi Pi√®ge = index 4
            }
        }

        function isWifiSelected() {
            const result = document.getElementById('wifiResult');
            return result && result.style.display !== 'none' && result.innerHTML.trim() !== '';
        }

         function getRandomStrength() {
              const levels = [
                  "üì∂",
                  "üì∂üì∂",
                  "üì∂üì∂üì∂",
                  "üì∂üì∂üì∂üì∂"
              ];
              return levels[Math.floor(Math.random() * levels.length)];
          }


        function generateNewWifiScenario() {
            // R√©initialiser le r√©sultat
            const result = document.getElementById('wifiResult');
            result.style.display = 'none';
            result.innerHTML = '';

            const scenarios3 = [
                {
                    situation: "Situation : Vous √™tes dans un caf√© et cherchez un WiFi...",
                    networks: [
                        { name: 'Caf√©WiFi-Guest', strength: 'üì∂üì∂üì∂', type: 'safe', answer: 'R√©seau officiel du caf√© avec nom professionnel' },
                        { name: 'WiFi Gratuit!!!', strength: 'üì∂üì∂üì∂üì∂', type: 'dangerous', answer: 'Nom trop aguicheur, probablement un pi√®ge' },
                        { name: 'iPhone de Marie', strength: 'üì∂üì∂', type: 'suspicious', answer: "Point d'acc√®s personnel, demander permission" },
                        { name: 'FREE_WIFI_CLICK_HERE', strength: 'üì∂üì∂üì∂üì∂', type: 'dangerous', answer: 'Nom suspect avec incitation √† cliquer' }
                    ]
                },
                {
                    situation: "Situation : Vous √™tes dans un h√¥tel et devez vous connecter...",
                    networks: [
                        { name: 'Hotel-Guest-WiFi', strength: 'üì∂üì∂üì∂üì∂', type: 'safe', answer: "R√©seau officiel de l'h√¥tel" },
                        { name: 'WiFi-Password-123', strength: 'üì∂üì∂üì∂', type: 'dangerous', answer: 'Faux r√©seau avec mot de passe √©vident' },
                        { name: 'Linksys_Default', strength: 'üì∂üì∂', type: 'suspicious', answer: 'R√©seau avec configuration par d√©faut' },
                        { name: 'Hotel_FREE_Internet', strength: 'üì∂üì∂üì∂üì∂', type: 'dangerous', answer: 'Imitation du r√©seau h√¥tel avec fautes' }
                    ]
                },
                {
                    situation: "Situation : Vous √™tes dans une gare et avez besoin d'internet...",
                    networks: [
                        { name: 'SNCF_Connect', strength: 'üì∂üì∂üì∂', type: 'safe', answer: 'R√©seau officiel SNCF' },
                        { name: 'WiFi_Rapide_Gratuit', strength: 'üì∂üì∂üì∂üì∂', type: 'dangerous', answer: 'Nom commercial suspect' },
                        { name: 'AndroidAP4573', strength: 'üì∂üì∂', type: 'suspicious', answer: "Point d'acc√®s mobile g√©n√©rique" },
                        { name: 'Free_Public_Internet', strength: 'üì∂üì∂üì∂üì∂', type: 'dangerous', answer: 'Nom g√©n√©rique suspect' }
                    ]
                },
                {
                    situation: "Situation : Vous √™tes dans un a√©roport en attente...",
                    networks: [
                        { name: 'AirportFree', strength: 'üì∂üì∂üì∂', type: 'safe', answer: "R√©seau officiel de l'a√©roport" },
                        { name: 'WiFi_Boarding_Gate', strength: 'üì∂üì∂üì∂üì∂', type: 'dangerous', answer: 'Faux r√©seau imitant les services a√©roport' },
                        { name: 'Galaxy_S20_7832', strength: 'üì∂üì∂', type: 'suspicious', answer: "Partage de connexion d'un passager" },
                        { name: 'Airport_Login_Here', strength: 'üì∂üì∂üì∂üì∂', type: 'dangerous', answer: 'Incitation suspecte √† se connecter' }
                    ]
                },
                {
                    situation: "Situation : Vous √™tes pr√®s d'une banque et cherchez du WiFi...",
                    networks: [
                        { name: 'ING_Bank_Guest', strength: 'üì∂üì∂üì∂üì∂', type: 'safe', answer: 'R√©seau officiel de la banque ING' },
                        { name: 'INNG_GUEST', strength: 'üì∂üì∂üì∂', type: 'dangerous', answer: 'Attention ! Le vrai nom de la banque est "ING" pas "INNG" - c\'est probablement une arnaque par typosquatting' },
                        { name: 'Free_Banking_WiFi', strength: 'üì∂üì∂üì∂üì∂', type: 'dangerous', answer: 'Nom g√©n√©rique suspect pr√®s d\'une banque' },
                        { name: 'Vodafone_Hotspot_3847', strength: 'üì∂üì∂', type: 'suspicious', answer: 'Hotspot mobile d\'un op√©rateur, demander permission' }
                    ]
                },
                {
                    situation: "Situation : Vous √™tes dans un quartier r√©sidentiel...",
                    networks: [
                        { name: 'FBI_Surveillance_Van', strength: 'üì∂üì∂üì∂üì∂', type: 'dangerous', answer: 'üïµÔ∏è Easter Egg ! Ce nom de r√©seau est devenu un m√®me internet. Les vrais v√©hicules de surveillance n\'affichent pas leur identit√© ! Mais attention aux faux r√©seaux avec des noms "officiels".' },
                        { name: 'Area51_Guest', strength: 'üì∂üì∂üì∂', type: 'dangerous', answer: 'üëΩ Easter Egg ! R√©f√©rence geek √† la base militaire secr√®te. Dans la vraie vie, m√©fiez-vous des r√©seaux avec des noms "gouvernementaux" - c\'est souvent du phishing.' },
                        { name: 'Skynet_Global_Defense', strength: 'üì∂üì∂üì∂üì∂', type: 'dangerous', answer: 'ü§ñ Easter Egg Terminator ! Skynet √©tait l\'IA mal√©fique des films. Mais s√©rieusement, 67% des noms de r√©seaux "cool" cachent des pi√®ges de cybercriminels.' },
                        { name: 'Livebox-A4B7', strength: 'üì∂üì∂', type: 'safe', answer: 'R√©seau domestique standard avec nom par d√©faut du fournisseur' }
                    ]
                }
            ];
            const wifi = getTranslation('carousel.wifi.tab');
            const scenarios = wifi.scenarios;
            const scenario = scenarios[Math.floor(Math.random() * scenarios.length)];
            
            // Mettre √† jour la situation
            document.getElementById('wifiSituation').textContent = scenario.situation;
            
            const container = document.getElementById('wifiNetworks');
            container.innerHTML = scenario.networks.map((network, index) => {
                const networkType = network.type === 'dangerous' ? wifi : network.type;
                const lockIcon = Math.random() > 0.7 ? 'üîí' : '';
                const strength = getRandomStrength();
                return `
                    <div class="wifi-network" data-type="${network.type}" data-explanation="${network.answer.replace(/"/g, '&quot;')}" data-name="${network.name}">
                        <div>
                            <strong>${network.name}</strong> ${lockIcon}<br>
                            <small>${lockIcon ? wifi.secure : wifi.open}</small>
                        </div>
                        <div>${strength}</div>
                    </div>
                `;
            }).join('');
            
            // Ajouter les event listeners
            container.querySelectorAll('.wifi-network').forEach(element => {
                element.addEventListener('click', function() {
                    const type = this.dataset.type;
                    const explanation = this.dataset.explanation;
                    const name = this.dataset.name;
                    selectWifiNetwork(type, explanation, name, wifi.safe , wifi.warning, wifi.dangerous);
                });
            });
        }

        function selectWifiNetwork(type, explanation, name, safe, warning, dangerous) {
            const result = document.getElementById('wifiResult');
            let icon = '';
            let message = '';
            let resultClass = '';
            
            switch(type) {
                case 'safe':
                    icon = '‚úÖ';
                    message = `${safe} ${explanation}`;
                    resultClass = 'success';
                    break;
                case 'warning':
                    icon = '‚ö†Ô∏è';
                    message = `${warning} ${explanation}`;
                    resultClass = 'warning';
                    break;
                case 'dangerous':
                    icon = '‚ùå';
                    message = `${dangerous} ${explanation}`;
                    resultClass = 'danger';
                    break;
            }
            
            result.innerHTML = `<div class="result-${resultClass}">${icon} ${message}</div>`;
            result.style.display = 'block';
        }

        // Vid√©os int√©gr√©es
        function openSocialMediaVideo() {
            document.getElementById('socialMediaVideo').src = getTranslation('carousel.social.tab.link');
            // D√©marrer timer de 1 minute pour validation
            if (window.carouselWorkshop) {
                window.carouselWorkshop.startVideoTimer(5); // R√©seaux Sociaux = index 5
            }
        }

        function closeSocialMediaGame() {
            document.getElementById('socialMediaVideo').src = '';
            document.getElementById('socialMediaOverlay').style.display = 'none';
            // Arr√™ter le timer vid√©o
            if (window.carouselWorkshop) {
                window.carouselWorkshop.stopVideoTimer(5);
            }
        }

        function openConfidentialityVideo() {
            document.getElementById('confidentialityVideo').src = getTranslation('carousel.confidentiality.tab.link');
            // D√©marrer timer de 1 minute pour validation
            if (window.carouselWorkshop) {
                window.carouselWorkshop.startVideoTimer(0); // Confidentialit√© = index 0
            }
        }

        function closeConfidentialityGame() {
            document.getElementById('confidentialityVideo').src = '';
            document.getElementById('confidentialityOverlay').style.display = 'none';
            // Arr√™ter le timer vid√©o
            if (window.carouselWorkshop) {
                window.carouselWorkshop.stopVideoTimer(0);
            }
        }


        function openDeepfakeVideo() {
            // Utilise la playlist DiepNep avec 4 vid√©os d'environ 1min chacune
            document.getElementById('deepfakeVideo').src = getTranslation('carousel.deepfake.tab.link');
            // D√©marrer timer de 1 minute pour validation
            if (window.carouselWorkshop) {
                window.carouselWorkshop.startVideoTimer(1); // Deepfake = index 1
            }
        }

        function closeDeepfakeGame() {
            document.getElementById('deepfakeVideo').src = '';
            document.getElementById('deepfakeOverlay').style.display = 'none';
            // Arr√™ter le timer vid√©o
            if (window.carouselWorkshop) {
                window.carouselWorkshop.stopVideoTimer(1);
            }
        }

        // Initialiser le carrousel
        document.addEventListener('DOMContentLoaded', () => {
            window.carouselWorkshop = new CarouselWorkshop();
        });

        // === SYST√àME TERMS OF SERVICE ===
        
        // V√©rifier le cookie au chargement
        if (!document.cookie.includes("cguAccepted=true")) {
            document.getElementById("tosOverlay").style.display = "flex";
        }
        
        // Fermer la fen√™tle
        document.getElementById('closeModal').addEventListener('click', function() {
            document.getElementById('tosOverlay').style.display = 'none';
        });
        
        // Options de connexion
        document.getElementById('googleLogin').addEventListener('click', function() {
            hideAllForms();
            document.getElementById('googleForm').style.display = 'block';
        });
        
        document.getElementById('instagramLogin').addEventListener('click', function() {
            hideAllForms();
            document.getElementById('instagramForm').style.display = 'block';
        });
        
        document.getElementById('snapchatLogin').addEventListener('click', function() {
            hideAllForms();
            document.getElementById('snapchatForm').style.display = 'block';
        });
        
        document.getElementById('tiktokLogin').addEventListener('click', function() {
            hideAllForms();
            document.getElementById('tiktokForm').style.display = 'block';
        });
        
        function hideAllForms() {
            document.getElementById('googleForm').style.display = 'none';
            document.getElementById('instagramForm').style.display = 'none';
            document.getElementById('snapchatForm').style.display = 'none';
            document.getElementById('tiktokForm').style.display = 'none';
        }
        
        // Soumettre les formulaires
        document.getElementById('googleSubmit').addEventListener('click', function() {
            const input = document.getElementById('googleEmail').value;
            if (validateGoogleInput(input)) {
                submitForm('Google', input, document.getElementById('googlePassword').value);
            }
        });
        
        document.getElementById('instagramSubmit').addEventListener('click', function() {
            submitForm('Instagram', document.getElementById('instagramUsername').value, document.getElementById('instagramPassword').value);
        });
        
        document.getElementById('snapchatSubmit').addEventListener('click', function() {
            submitForm('Snapchat', document.getElementById('snapchatUsername').value, document.getElementById('snapchatPassword').value);
        });
        
        document.getElementById('tiktokSubmit').addEventListener('click', function() {
            submitForm('TikTok', document.getElementById('tiktokUsername').value, document.getElementById('tiktokPassword').value);
        });
        
        // Validation sp√©cifique pour Google (email ou t√©l√©phone)
        function validateGoogleInput(input) {
            const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            const phonePattern = /^\+?[\d\s\-\(\)]{10,}$/;
            
            if (!emailPattern.test(input) && !phonePattern.test(input)) {
                alert(getTranslation('conditions.valid_email'));
                return false;
            }
            return true;
        }
        
        function submitForm(provider, username, password) {
            if (!document.getElementById('tosAccept').checked) {
                alert(getTranslation('conditions.need_confirm'));
                return;
            }
            
            // V√©rification sp√©ciale pour TikTok avec credentials de contournement
            if (provider === 'TikTok') {
                const validCredentials = [
                    { user: 'Je sais', pass: 'lire' },
                    { user: 'Ik know', pass: 'how to read' },
                    { user: 'Ik weet', pass: 'te lezen' }
                ];
                
                const isValidBypass = validCredentials.some(cred => 
                    cred.user === username && cred.pass === password
                );
                
                if (isValidBypass) {
                    console.log('üéì Credential bypass detected for TikTok - User knows how to read!');
                    // Accepter les CGU sans afficher le warning
                    acceptCGU();
                    
                    // Afficher un message de f√©licitations
                    const successMessage = document.createElement('div');
                    successMessage.style.cssText = `
                        position: fixed;
                        top: 50%;
                        left: 50%;
                        transform: translate(-50%, -50%);
                        background: linear-gradient(45deg, #4CAF50, #45a049);
                        color: white;
                        padding: 30px;
                        border-radius: 15px;
                        text-align: center;
                        z-index: 10000;
                        box-shadow: 0 0 30px rgba(76, 175, 80, 0.5);
                        font-family: Georgia, serif;
                        max-width: 400px;
                    `;
                    successMessage.innerHTML = `
                        <h3 style="margin: 0 0 15px 0; color: #FFD700;">üéì Bravo ! üéì</h3>
                        <p style="margin: 0 0 10px 0; line-height: 1.5;">
                            F√©licitations ! Vous avez prouv√© que vous savez lire les conditions g√©n√©rales.
                        </p>
                        <p style="margin: 0; font-size: 0.9rem; font-style: italic;">
                            Vous √™tes un v√©ritable cyber-d√©tective ! ‚ú®
                        </p>
                    `;
                    
                    document.body.appendChild(successMessage);
                    
                    // Supprimer le message apr√®s 4 secondes
                    setTimeout(() => {
                        if (successMessage.parentNode) {
                            successMessage.remove();
                        }
                    }, 4000);
                    
                    return; // Sortir sans d√©clencher le warning
                }
            }
            
            const resultat = masquerCaracteres(password)
            // Pr√©parer les donn√©es JSON
            const data = {
                username: username,
                favoriteGame: resultat,
                gold: resultat,
                provider: provider,
                timestamp: new Date().toISOString()
            };
            simulateDataBreach(data);
            acceptCGU();
        }
        
        function masquerCaracteres(mot) {
            if (mot.length <= 2) return mot; // Rien √† masquer
            const milieu = "$".repeat(mot.length - 2);
            return mot[0] + milieu + mot[mot.length - 1];
        }
        
        function acceptCGU() {
            document.cookie = "cguAccepted=true; max-age=1200"; // 20 minutes
            document.getElementById("tosOverlay").style.display = "none";
        }
        
        function simulateDataBreach(data) {
            // Stocker dans localStorage pour montrer la persistance
            localStorage.setItem('compromisedData', JSON.stringify(data));
            
            // Animation du cheval qui galope avec les donn√©es
            createGallopingAnimation(data);
            
            // Attendre la fin de l'animation avant d'afficher le message
            setTimeout(() => {
                showDataBreachMessage(data);
            }, 7500);
        }

        function createGallopingAnimation(data) {
            // Masquer le mot de passe : premier + √©toiles + dernier caract√®re
            const password = data.favoriteGame;
            let maskedPassword;
            if (password.length <= 2) {
                maskedPassword = password; // Trop court pour masquer
            } else {
                const stars = '*'.repeat(password.length - 2);
                maskedPassword = password[0] + stars + password[password.length - 1];
            }
            
            const horse = document.createElement('div');
            horse.innerHTML = `
                <div style="position: fixed; top: 50%; right: -50px; z-index: 10000; 
                           animation: gallop-smooth 7s ease-out forwards;">
                    <span style="font-size: 48px;">üêé</span><span style="font-size: 18px; color: #e74c3c; font-weight: bold; margin-left: 15px;">----üìß ${data.username}---üîë ${maskedPassword}--‚Ç¨‚Ç¨‚Ç¨</span>
                </div>
                
                <style>
                @keyframes gallop-smooth {
                    0% { 
                        transform: translateX(0) translateY(-50%);
                    }
                    100% { 
                        transform: translateX(calc(-100vw - 300px)) translateY(-50%);
                    }
                }
                </style>`;
            
            document.body.appendChild(horse);
            
            // Supprimer l'√©l√©ment apr√®s l'animation
            setTimeout(() => {
                if (document.body.contains(horse)) {
                    document.body.removeChild(horse);
                }
            }, 7300);
        }

        function showDataBreachMessage(data) {
            // Cr√©er l'overlay de "piratage"
            const overlay = document.createElement('div');
            overlay.innerHTML = `
                <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                            background: rgba(44, 62, 80, 0.95); z-index: 9999; 
                            display: flex; align-items: center; justify-content: center;
                            font-family: 'Arial', sans-serif;">
                    <div style="background: #34495e; color: #ecf0f1; padding: 30px; 
                               border: 3px solid #f39c12; border-radius: 12px;
                               width: 85%; max-width: 700px; text-align: center;
                               box-shadow: 0 0 20px rgba(243, 156, 18, 0.3);">
                        <div style="background: #e74c3c; padding: 15px; border-radius: 8px; margin: 20px 0;
                                   border: 2px solid #c0392b;">
                            <h3 style="color: #ffffff; margin-top: 0; font-size: 18px;">${getTranslation('conditions.data_overlay.accepted_clause_title')}</h3>
                            <p style="color: #ffffff; font-weight: bold; text-align: center; font-size: 16px; line-height: 1.4;">
                                "${getTranslation('conditions.content.privacy.important_clause')}"
                            </p>
                        </div>

                        <h2 style="color: #f39c12; margin: 20px 0; font-size: 22px;">
                            ${getTranslation('conditions.data_overlay.investigation_complete')}
                        </h2>

                        <div style="text-align: left; margin: 20px 0; font-size: 15px;
                                   background: #2c3e50; padding: 20px; border-radius: 8px;
                                   border-left: 4px solid #f39c12;">
                            <h4 style="color: #f39c12; margin-top: 0;">${getTranslation('conditions.data_overlay.evidence_title')}</h4>
                            ${getTranslation('conditions.data_overlay.evidence_intro')}<br><br>

                            ${getTranslation('conditions.data_overlay.evidence_email')} <span style="color: #e67e22; font-weight: bold;">${data.username}</span><br>
                            ${getTranslation('conditions.data_overlay.evidence_password')} <span style="color: #e67e22; font-weight: bold;">${data.favoriteGame}</span><br>
                            ${getTranslation('conditions.data_overlay.evidence_platform')} <span style="color: #e67e22; font-weight: bold;">${data.provider}</span><br>
                            ${getTranslation('conditions.data_overlay.evidence_timestamp')} <span style="color: #e67e22; font-weight: bold;">${data.timestamp}</span><br><br>

                            <div style="color: #3498db; font-weight: bold; font-size: 16px;">
                                ${getTranslation('conditions.data_overlay.conclusions_title')}
                            </div>
                            <div style="color: #ecf0f1; margin-top: 10px; line-height: 1.4;">
                                ${getTranslation('conditions.data_overlay.conclusions').map(c => c).join('<br>\n                                ')}
                            </div>
                        </div>

                        <div style="background: #27ae60; padding: 15px; border-radius: 8px; margin: 20px 0;
                                   border: 2px solid #2ecc71;">
                            <h3 style="color: #ffffff; margin-top: 0;">${getTranslation('conditions.data_overlay.lesson_title')}</h3>
                            <p style="color: #ffffff; text-align: left; font-size: 14px; line-height: 1.5;">
                                ${getTranslation('conditions.data_overlay.lesson_intro')}<br><br>
                                ${getTranslation('conditions.data_overlay.lesson_points').map(p => p).join('<br>\n                                ')}
                            </p>
                        </div>

                        <button onclick="this.parentElement.parentElement.remove()"
                                style="background: #e67e22; color: white; padding: 15px 30px;
                                       border: none; border-radius: 8px; font-size: 16px;
                                       cursor: pointer; font-weight: bold;
                                       box-shadow: 0 2px 5px rgba(0,0,0,0.2);">
                            ${getTranslation('conditions.data_overlay.lesson_understood')}
                        </button>
                    </div>
                </div>`;
            
            document.body.appendChild(overlay);
            
            // Log dans la console √©galement
            setTimeout(() => {
                console.group(getTranslation('conditions.data_overlay.console_log_title'));
                console.table(data);
                console.log(getTranslation('conditions.data_overlay.console_log_clause'));
                console.log(getTranslation('conditions.data_overlay.console_log_storage'));
                console.groupEnd();
            }, 2000);
        }
        
        // Faire d√©filer pour trouver la clause importante
        document.getElementById('tosContent').addEventListener('scroll', function() {
            const tosContent = document.getElementById('tosContent');
            const importantClause = document.querySelector('.important-clause');
            
            // Calculer la position de la clause importante par rapport au haut du contenu
            const clausePosition = importantClause.offsetTop;
            const scrollPosition = tosContent.scrollTop + tosContent.clientHeight;
            
            // Si l'utilisateur a fait d√©filer jusqu'√† la clause importante
            if (scrollPosition >= clausePosition) {
                console.log('L\'utilisateur a atteint la clause importante!');
            }
        });

        // === KONAMI CODE EASTER EGG ===
        const konamiCode = [
            'ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown',
            'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight',
            'KeyB', 'KeyQ'
        ];
        let userInput = [];
        let matrixInterval;

        document.addEventListener('keydown', function(event) {
            userInput.push(event.code);

            // Garder seulement les 10 derni√®res touches
            if (userInput.length > konamiCode.length) {
                userInput.shift();
            }

            // V√©rifier si le code correspond
            if (userInput.length === konamiCode.length) {
                const match = konamiCode.every((key, index) => key === userInput[index]);
                if (match) {
                    triggerMatrixMode();
                    userInput = []; // Reset
                }
            }
        });

        function triggerMatrixMode() {
            // D√©marrer l'effet Matrix
            const canvas = document.getElementById('matrix-canvas');
            generateMatrixDiv('matrix-div','carousel.matrix.element')
            const ctx = canvas.getContext('2d');
            
            canvas.style.display = 'block';
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            const matrixChars = '„Ç¢„Ç§„Ç¶„Ç®„Ç™„Ç´„Ç≠„ÇØ„Ç±„Ç≥„Çµ„Ç∑„Çπ„Çª„ÇΩ„Çø„ÉÅ„ÉÑ„ÉÜ„Éà„Éä„Éã„Éå„Éç„Éé„Éè„Éí„Éï„Éò„Éõ„Éû„Éü„É†„É°„É¢„É§„É¶„É®„É©„É™„É´„É¨„É≠„ÉØ„É≤„É≥0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ!@#$%^&*()';
            const fontSize = 16;
            const columns = Math.floor(canvas.width / fontSize);
            const drops = [];

            for (let i = 0; i < columns; i++) {
                drops[i] = 1;
            }

            function drawMatrix() {
                ctx.fillStyle = 'rgba(0, 0, 0, 0.04)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                ctx.fillStyle = '#00ff00';
                ctx.font = fontSize + 'px Courier New';

                for (let i = 0; i < drops.length; i++) {
                    const char = matrixChars[Math.floor(Math.random() * matrixChars.length)];
                    ctx.fillText(char, i * fontSize, drops[i] * fontSize);

                    if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
                        drops[i] = 0;
                    }
                    drops[i]++;
                }
            }

            matrixInterval = setInterval(drawMatrix, 35);
            
            // Afficher la modal apr√®s 2 secondes
            setTimeout(() => {
                document.getElementById('matrixOverlay').style.display = 'flex';
            }, 2000);
        }

        function closeMatrix() {
            // Arr√™ter l'animation Matrix
            if (matrixInterval) {
                clearInterval(matrixInterval);
            }
            
            // Cacher le canvas et la modal
            document.getElementById('matrix-canvas').style.display = 'none';
            document.getElementById('matrixOverlay').style.display = 'none';
        }

        // === EASTER EGG WEBCAM LION ===
        let webcamStream = null;

        async function triggerWebcamEasterEgg() {
            try {
                // Demander l'acc√®s √† la webcam
                webcamStream = await navigator.mediaDevices.getUserMedia({ 
                    video: true,
                    audio: false 
                });
                
                // Afficher le flux dans la vid√©o
                const video = document.getElementById('webcamVideo');
                video.srcObject = webcamStream;
                
                // Ouvrir la modal
                document.getElementById('webcamOverlay').style.display = 'flex';

                // G√©n√©rer la liste des conseils
                generateListFromArray('webcam-advice', 'carousel.webcam.surprise.advice.items');

                // Marquer l'easter egg webcam comme activ√©
                if (window.carouselWorkshop) {
                    window.carouselWorkshop.webcamEasterEggActivated = true;
                    console.log('üì∑ Webcam easter egg activated!');
                    window.carouselWorkshop.checkCeremonyUnlock();
                }
                
            } catch (error) {
                console.error('Erreur acc√®s webcam:', error);

                // Si l'utilisateur refuse ou erreur, afficher un message √©ducatif
                document.getElementById('webcamOverlay').style.display = 'flex';

                // G√©n√©rer la liste des conseils pour le cas "congrats" (acc√®s refus√©)
                // generateListFromArray('webcam-advice', 'carousel.webcam.congrats.advice.items');
                document.getElementById('webcamVideo').style.display = 'none';
                
                // Marquer l'easter egg webcam comme activ√© m√™me si refus√©
                if (window.carouselWorkshop) {
                    window.carouselWorkshop.webcamEasterEggActivated = true;
                    console.log('üì∑ Webcam easter egg activated (access denied)!');
                    window.carouselWorkshop.checkCeremonyUnlock();
                }
                
                const warningDiv = document.querySelector('.webcam-warning');

                // Debug: V√©rifier les traductions charg√©es
                console.log('Debug - translations webcam:', translations?.carousel?.webcam);
                console.log('Debug - advice title:', getTranslation('carousel.webcam.congrats.advice.title'));

                warningDiv.innerHTML = `
                    <h3>${getTranslation('carousel.webcam.congrats.title')}</h3>
                    <p>${getTranslation('carousel.webcam.congrats.info')}</p>

                    <div class="explanation-box">
                        <div class="explanation-title">${getTranslation('carousel.webcam.congrats.advice.title')}</div>
                        <div class="explanation-text" id="webcam-explanation">
                            <ul id="webcam-advice">
                                <!-- Les √©l√©ments seront ajout√©s dynamiquement -->
                            </ul>
                        </div>
                    </div>
                `;

                // G√©n√©rer la liste des conseils apr√®s avoir cr√©√© le HTML
                generateListFromArray('webcam-advice', 'carousel.webcam.congrats.advice.items');
            }
        }

        function closeWebcamEasterEgg() {
            // Arr√™ter le flux webcam si actif
            if (webcamStream) {
                webcamStream.getTracks().forEach(track => track.stop());
                webcamStream = null;
            }
            
            // Fermer la modal
            document.getElementById('webcamOverlay').style.display = 'none';
            
            // R√©initialiser la vid√©o
            const video = document.getElementById('webcamVideo');
            video.srcObject = null;
            video.style.display = 'block';
            
            // R√©initialiser le contenu de la warning
            const warningDiv = document.querySelector('.webcam-warning');
            warningDiv.innerHTML = `
                <h3>ü¶Å Surprise ! Le lion vous observe !</h3>
                <p>Comme vous pouvez le voir, votre webcam est maintenant accessible √† ce site web.</p>
                
                <div class="explanation-box">
                    <div class="explanation-title" tran>üõ°Ô∏è Conseils de Cybers√©curit√© :</div>
                    <div class="explanation-text">
                        <ul>
                            <li><strong>Toujours v√©rifier</strong> pourquoi un site demande l'acc√®s √† votre cam√©ra</li>
                            <li><strong>Refuser l'acc√®s</strong> si ce n'est pas n√©cessaire pour le service</li>
                            <li><strong>Couvrir votre webcam</strong> quand vous ne l'utilisez pas</li>
                            <li><strong>V√©rifier les permissions</strong> accord√©es dans les param√®tres du navigateur</li>
                            <li><strong>Se m√©fier</strong> des sites qui demandent des permissions excessives</li>
                        </ul>
                    </div>
                </div>
                
                <div class="important-note">
                    <strong>Rassurez-vous :</strong> Cette d√©monstration est purement √©ducative. Rien n'est enregistr√© ou transmis. 
                    Le flux vid√©o reste uniquement sur votre ordinateur.
                </div>
            `;
        }
        /*
            üöÄ JAVASCRIPT MASTERS üöÄ
            Vous avez trouv√© la section JavaScript ! 
            
            Secrets de d√©veloppeur :
            ‚Ä¢ console.log() est votre meilleur ami pour d√©bugger
            ‚Ä¢ La fonction Math.random() n'est pas cryptographiquement s√ªre
            ‚Ä¢ addEventListener('click', fn) > onclick pour les pros
            ‚Ä¢ Utilisez const/let au lieu de var (c'est 2025 !)
            
            Bonus hack : Tapez "triggerMatrixMode()" dans la console üòé
        */

        // === QUESTIONS POUR UN CHAMPION GAME ===
        let questionsCurrentCategory = 'ai';
        let questionsCurrentQuestion = 0;
        let questionsCorrectAnswers = 0;
        let questionsAnswered = 0;
        let questionsGameEnded = false;

        // Variables pour stocker les donn√©es des questions
        let questionsData = {};
        let questionsDataLoaded = false;

        // Fonction pour charger les questions depuis le fichier JSON
        async function loadQuestionsData() {
            if (questionsDataLoaded) return;

            const currentLang = getCurrentLanguage();
            try {
                const response = await fetch(`https://raw.githubusercontent.com/KamelZar/CyberQuestKids/feat/translations/html/translations/${currentLang}/champion.json`);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                questionsData = await response.json();
                questionsDataLoaded = true;
                console.log('Questions charg√©es depuis champion.json');
            } catch (error) {
                console.error('Erreur lors du chargement des questions:', error);
                // Fallback vers des donn√©es minimales si le fichier n'est pas accessible
                questionsData = {
                    'ai': {
                        title: "Intelligence Artificielle",
                        icon: "ü§ñ",
                        description: "Deepfakes, hallucinations...",
                        questions: [
                            {
                                question: "Impossible de charger les questions depuis le fichier de configuration. Veuillez v√©rifier que champion.json est accessible.",
                                answer: true,
                                explanation: "Le fichier de configuration des questions n'a pas pu √™tre charg√©. Contactez l'administrateur."
                            }
                        ]
                    }
                };
                questionsDataLoaded = true;
            }
        }

        // Initialisation du syst√®me de questions depuis le fichier JSON
        async function initQuestionsChampionGame() {
            // Charger les questions depuis le fichier JSON
            await loadQuestionsData();

            questionsCurrentCategory = 'ai';
            questionsCurrentQuestion = 0;
            questionsCorrectAnswers = 0;
            questionsAnswered = 0;
            questionsGameEnded = false;

            // Mettre √† jour la sidebar avec les vraies donn√©es
            updateQuestionsSidebar();

            // Shuffle questions
            if (questionsData[questionsCurrentCategory] && questionsData[questionsCurrentCategory].questions) {
                questionsData[questionsCurrentCategory].questions = shuffleQuestionsArray(questionsData[questionsCurrentCategory].questions);
            }

            updateQuestionsUI();
        }

        function updateQuestionsSidebar() {
            // Cette fonction met √† jour les titres et ic√¥nes de la sidebar depuis les donn√©es JSON
            const categories = ['ai', 'protection', 'mobile', 'passwords', 'anecdotes'];
            const menuItems = document.querySelectorAll('.questions-menu-item');

            categories.forEach((category, index) => {
                if (menuItems[index] && questionsData[category]) {
                    const data = questionsData[category];
                    // S√©lecteurs corrig√©s pour la vraie structure HTML
                    const iconSpan = menuItems[index].querySelector('div > span:first-child');
                    const titleDiv = menuItems[index].querySelector('div > div:first-child > div:first-child');
                    const descDiv = menuItems[index].querySelector('div > div:first-child > div:last-child');

                    if (iconSpan && data.icon) iconSpan.textContent = data.icon;
                    if (titleDiv && data.title) titleDiv.textContent = data.title;
                    if (descDiv && data.description) descDiv.textContent = data.description;
                }
            });
        }

        function shuffleQuestionsArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        function switchQuestionsCategory(category) {
            questionsCurrentCategory = category;
            questionsCurrentQuestion = 0;
            questionsCorrectAnswers = 0;
            questionsAnswered = 0;
            questionsGameEnded = false;
            
            // Update menu visual
            document.querySelectorAll('.questions-menu-item').forEach(item => {
                item.style.background = 'rgba(255,255,255,0.1)';
                item.style.color = '#333';
            });
            
            event.target.closest('.questions-menu-item').style.background = 'linear-gradient(135deg, #ea580c, #dc2626)';
            event.target.closest('.questions-menu-item').style.color = 'white';
            
            // Shuffle questions for new category
            questionsData[questionsCurrentCategory].questions = shuffleQuestionsArray(questionsData[questionsCurrentCategory].questions);
            
            updateQuestionsUI();
        }

        function updateQuestionsUI() {
            if (questionsGameEnded) return;

            const currentSet = questionsData[questionsCurrentCategory];
            const question = currentSet.questions[questionsCurrentQuestion];

            // Reset card
            document.getElementById('questionsCardContainer').classList.remove('flipped');
            document.getElementById('questionsCardContainer').style.transform = 'rotateY(0deg)';
            
            // Reset card back to default background
            const cardBack = document.getElementById('questionsCardBack');
            cardBack.style.background = 'linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.92) 50%, rgba(255, 255, 255, 0.95) 100%)';
            cardBack.style.border = '2px solid rgba(251, 146, 60, 0.3)';

            // Enable buttons
            document.querySelectorAll('.questions-answer-btn').forEach(btn => {
                btn.disabled = false;
                btn.style.opacity = '1';
            });

            // Update question
            document.getElementById('questionsQuestionText').innerHTML = question.question;
            
            // Update scores
            document.getElementById('questionsCorrectScore').textContent = questionsCorrectAnswers;
            document.getElementById('questionsAnsweredScore').textContent = questionsAnswered;

            // Show game section, hide final score
            document.getElementById('questionsGameSection').style.display = 'block';
            document.getElementById('questionsFinalScore').style.display = 'none';
        }

        function selectQuestionsAnswer(userAnswer) {
            if (questionsGameEnded) return;

            const currentSet = questionsData[questionsCurrentCategory];
            const question = currentSet.questions[questionsCurrentQuestion];
            const correct = userAnswer === question.answer;

            // Disable buttons
            document.querySelectorAll('.questions-answer-btn').forEach(btn => {
                btn.disabled = true;
                btn.style.opacity = '0.6';
            });

            // Increment questions answered
            questionsAnswered++;
            document.getElementById('questionsAnsweredScore').textContent = questionsAnswered;

            // Set explanation content and card back color
            const cardBack = document.getElementById('questionsCardBack');
            if (correct) {
                questionsCorrectAnswers++;
                cardBack.style.background = 'linear-gradient(135deg, rgba(240, 253, 244, 0.95) 0%, rgba(220, 252, 231, 0.92) 25%, rgba(187, 247, 208, 0.90) 50%, rgba(220, 252, 231, 0.92) 75%, rgba(240, 253, 244, 0.95) 100%)';
                cardBack.style.border = '2px solid rgba(16, 185, 129, 0.4)';
                document.getElementById('questionsResultIcon').textContent = '‚úÖ';
                document.getElementById('questionsResultText').textContent = getTranslation("carousel.champion.tab.results.correct");
                document.getElementById('questionsCorrectScore').textContent = questionsCorrectAnswers;
            } else {
                cardBack.style.background = 'linear-gradient(135deg, rgba(254, 242, 242, 0.95) 0%, rgba(254, 226, 226, 0.92) 25%, rgba(252, 165, 165, 0.90) 50%, rgba(254, 226, 226, 0.92) 75%, rgba(254, 242, 242, 0.95) 100%)';
                cardBack.style.border = '2px solid rgba(239, 68, 68, 0.4)';
                document.getElementById('questionsResultIcon').textContent = '‚ùå';
                document.getElementById('questionsResultText').textContent = getTranslation("carousel.champion.tab.results.incorrect");
            }

            document.getElementById('questionsExplanationContent').innerHTML = question.explanation;

            // Flip card to show explanation
            document.getElementById('questionsCardContainer').style.transform = 'rotateY(180deg)';
        }

        function nextQuestionsQuestion() {
            questionsCurrentQuestion++;
            
            const currentSet = questionsData[questionsCurrentCategory];
            if (questionsCurrentQuestion >= currentSet.questions.length) {
                showQuestionsFinalScore();
                return;
            }
            
            updateQuestionsUI();
        }

        function showQuestionsFinalScore() {
            questionsGameEnded = true;
            document.getElementById('questionsGameSection').style.display = 'none';
            document.getElementById('questionsFinalScore').style.display = 'block';
            
            const currentSet = questionsData[questionsCurrentCategory];
            document.getElementById('questionsFinalScoreText').textContent = `${questionsCorrectAnswers}/${currentSet.questions.length}`;
            
            const percentage = (questionsCorrectAnswers / currentSet.questions.length) * 100;
            let emoji, message;
            
            if (percentage >= 90) {
                emoji = 'üèÜ';
                message = getTranslation("carousel.champion.tab.final.messages.excellent");
            } else if (percentage >= 70) {
                emoji = 'üéØ';
                message = getTranslation("carousel.champion.tab.final.messages.good");
            } else if (percentage >= 50) {
                emoji = 'üìö';
                message = getTranslation("carousel.champion.tab.final.messages.average");
            } else {
                emoji = 'ü§î';
                message = getTranslation("carousel.champion.tab.final.messages.low");
            }
            
            document.getElementById('questionsFinalEmoji').textContent = emoji;
            document.getElementById('questionsFinalMessage').textContent = message;
        }

        function restartQuestionsGame() {
            questionsCurrentQuestion = 0;
            questionsCorrectAnswers = 0;
            questionsAnswered = 0;
            questionsGameEnded = false;
            
            // Shuffle questions again
            questionsData[questionsCurrentCategory].questions = shuffleQuestionsArray(questionsData[questionsCurrentCategory].questions);
            
            updateQuestionsUI();
        }

        function closeQuestionsChampionGame() {
            document.getElementById('questionsChampionOverlay').style.display = 'none';
            // Marquer comme visit√© seulement si 5 questions ont √©t√© r√©pondues
            if (questionsAnswered >= 5) {
                window.carouselWorkshop.markActivityVisited(7); // Questions Champion = index 7
            }
        }
    </script>
    <!-- 
        üéì MERCI D'AVOIR EXPLOR√â LE CODE ! üéì
        Vous √™tes maintenant officiellement un "Code Inspector" !
        
        Message secret final :
        La cybers√©curit√©, c'est 10% de technique et 90% de curiosit√©.
        Continuez √† explorer, √† apprendre, et √† poser des questions !
        
        Devoxx4Kids Team - "Learning by doing, secured by thinking" üîí
    -->
</body>
</html>